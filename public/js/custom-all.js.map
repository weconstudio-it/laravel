{"version":3,"sources":["app.js","crud.js","datatables.js","errorHandler.js","formatter_datatables.js","grid.js","popup.js","popup_client.js","register.js","user.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC92BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"custom-all.js","sourcesContent":["var app = {\n\tbaseUrl: undefined,\n\tdefault_url: undefined,\n\terrorPage: undefined,\n\tinit: function(default_url) {\n\t\terrorHandler.init();\n\n\t\tapp.default_url = default_url || 'dashboard';\n\n\t\tif(app.baseUrl) {\n\t\t\tapp.default_url_error = app.baseUrl + \"/error\";\n\t\t\t$.get(app.default_url_error)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tapp.errorPage = data;\n\t\t\t\t});\n\t\t}\n\n\t\tapp.runBind();\n\n\t\tapp.initKeepalive();\n\n\n\n\t\t// Laravel CSRF protection\n\t\t$.ajaxSetup({\n\t\t\theaders: {\n\t\t\t\t'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t}\n\t\t});\n\n\t\t// ACE Ajax manager\n\t\t$('#page-content-section').\n\t\t\tace_ajax({\n\t\t\t\tcontent_url: function(hash) {\n\n\t\t\t\t\t//debugger\n\n\t\t\t\t\t//hash is the value from document url hash\n\t\t\t\t\t//take \"url\" param and return the relevant url to load\n\t\t\t\t\treturn hash;\n\t\t\t\t},\n\t\t\t\tdefault_url: app.default_url,\n\t\t\t\tloading_icon: \"fa fa-cog fa-2x blue fa-spin\"\n\t\t\t})\n\t\t\t.on('ajaxloadcomplete', function(e, params) {\n\t\t\t\tapp.runBind();\n\t\t\t})\n\t\t\t.on('ajaxloaderror', function() {\n\t\t\t\t// recupero una pagina di errore e la mostra\n\t\t\t\t$(\"#page-content-section\").html(app.errorPage);\n\t\t\t});\n\n\t},\n\n\tinitKeepalive: function () {\n\t\t// window.setInterval(function () {\n\t\t// \t$.post(\"?p=server&a=keepalive\", function (data) {\n\t\t// \t\tif (!data.response)\n\t\t// \t\t\tapp.reload();\n\t\t// \t});\n\t\t// }, 3 * 60 * 1000);\n\t},\n\n\t/**\n\t * Aggiunge N scripts alla pagina\n\t *  es: getMultiScripts(aScripts).done(function(){...});\n\t * @param arr\n\t * @param path\n\t * @returns {*}\n\t */\n\tgetMultiScripts: function(arr, path) {\n\t\tvar _arr = jQuery.map(arr, function(scr) {\n\t\t\treturn jQuery.getScript( (path||\"\") + scr );\n\t\t});\n\t\n\t\t_arr.push(jQuery.Deferred(function( deferred ){\n\t\t\tjQuery( deferred.resolve );\n\t\t}));\n\t\n\t\treturn jQuery.when.apply(jQuery, _arr);\n\t},\n\t\n\t/**\n\t *\n\t * @param nome\n\t * @param cognome\n\t * @param comune\n\t * @param provincia\n\t * @param dataNascita\n\t * @param sesso: M|F\n\t * @param callback\n\t */\n\tcalcoloCodiceFiscale: function (nome, cognome, comune, provincia, dataNascita, sesso, stato, callback) {\n\n\t\tif (nome == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'nome'\");\n\t\t\treturn;\n\t\t}\n\t\tif (cognome == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'cognome'\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (comune == \"\" && provincia != \"ES\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'comune'\");\n\t\t\treturn;\n\t\t}\n\t\tif (provincia == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'provincia'\");\n\t\t\treturn;\n\t\t}\n\t\tif (dataNascita == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'dataNascita'\");\n\t\t\treturn;\n\t\t}\n\t\tif (sesso == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'sesso'\");\n\t\t\treturn;\n\t\t}\n\n\t\tstato = stato || \"\";\n\n\t\t$.post(\"?p=server&a=calcolaCodiceFiscale\", {\n\t\t\tnome: nome,\n\t\t\tcognome: cognome,\n\t\t\tdata: dataNascita,\n\t\t\tcomune: comune,\n\t\t\tprovincia: provincia,\n\t\t\tsesso: sesso,\n\t\t\tstato: stato\n\t\t}, function (data) {\n\t\t\tif (data.response) {\n\t\t\t\tif (typeof callback == 'function') {\n\t\t\t\t\tcallback(data.message);\n\t\t\t\t} else {\n\t\t\t\t\tapp.warning(\"\", \"Callback mancante\");\n\t\t\t\t\tconsole.log(data.message);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}).error(function () {\n\t\t\tapp.error('Errore durante la chiamata calcolaCodiceFiscale');\n\t\t});\n\t},\n\n\tinitAutocomplete: function () {\n\n\t\t$('[data-autocomplete]').each(function () {\n\t\t\tvar tipo = $(this).attr('data-autocomplete');\n\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\turl = url || \"geoname\";\n\n\t\t\tif($.trim($(this).html()) === \"\") { // così posso partire con una option già selezionata\n\t\t\t\t$(this).html(\"<option></option>\");\n\t\t\t}\n\n\t\t\t$(this).ajaxChosen({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: app.baseUrl + \"/\" + url + \"/\" + tipo,\n\t\t\t\tdataType: 'json'\n\t\t\t}, function (data) {\n\t\t\t\tvar results = [];\n\n\t\t\t\t$.each(data, function (i, val) {\n\t\t\t\t\tresults.push({ value: val.value, text: val.text });\n\t\t\t\t});\n\n\t\t\t\treturn results;\n\t\t\t}, {allow_single_deselect: true});\n\t\t});\n\n\t\t$('[data-autocompleteui]').each(function () {\n\n\t\t\tvar tipo = $(this).attr('data-autocomplete');\n\n\t\t\tvar itemOptional = $(this).attr('data-itemopzionale');\n\t\t\titemOptional = itemOptional || 0;\n\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\turl = url || \"geoname\";\n\t\t\t\n\t\t\tvar callback = $(this).attr('data-callback');\n\n\t\t\tfunction getTextValueFromResponseAutocomplete(obj) {\n\n\t\t\t\tif (typeof obj.txt != 'undefined')\n\t\t\t\t\treturn obj.txt;\n\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\t$(this).autocomplete({\n\t\t\t\tsource: function (request, response) {\n\t\t\t\t\t$.getJSON(url + \"/\" + tipo + \"/\" + request.term, function (data) {\n\t\t\t\t\t\tresponse($.map(data.message, function (value, key) {\n\n\t\t\t\t\t\t\tvar textValue = \"\";\n\t\t\t\t\t\t\tif (typeof value == 'string') {\n\t\t\t\t\t\t\t\ttextValue = value;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (typeof value == 'object') {\n\t\t\t\t\t\t\t\t\ttextValue = getTextValueFromResponseAutocomplete(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: textValue,\n\t\t\t\t\t\t\t\tobj: value,\n\t\t\t\t\t\t\t\tvalue: key\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tminLength: 0,\n\t\t\t\tselect: function (event, ui) {\n\t\t\t\t\tvar textValue = \"\";\n\n\t\t\t\t\tif (typeof ui.item.obj == 'object') {\n\t\t\t\t\t\ttextValue = getTextValueFromResponseAutocomplete(ui.item.obj);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttextValue = ui.item.label;\n\t\t\t\t\t}\n\n\t\t\t\t\t$(this).val(textValue);\n\n\t\t\t\t\t$(this).attr('data-id', ui.item.value);\n\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tfunctionCallBack = eval(callback);\n\t\t\t\t\t\tif (typeof functionCallBack == 'function') {\n\t\t\t\t\t\t\tfunctionCallBack($(this), tipo, ui.item);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"Callback non trovata: \" + callback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tchange: function (event, ui) {\n\t\t\t\t\tif (ui.item) {\n\t\t\t\t\t\t// valido\n\t\t\t\t\t\t$(this).val(ui.item.label);\n\t\t\t\t\t\t$(this).attr('data-id', ui.item.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!itemOptional) {\n\t\t\t\t\t\t\t$(this).attr('data-id', 0);\n\t\t\t\t\t\t\t$(this).val('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t},\n\n\trunBind: function () {\n\t\t// inizializzazione timepicker in italiano\n\n\t\tif (jQuery.datetimepicker) {\n\t\t\tjQuery.datetimepicker.setLocale('it');\n\t\t}\n\n\t\t// TODO: mettere nel bower.json inputmask\n\t\t// $(\".euro\").inputmask('decimal', {digits: 2});\n\n\t\t/* inizializzazione editor descrizione */\n\t\t$('.wysiwyg-editor').each(function () {\n\t\t\tvar editor = $(this).ace_wysiwyg({\n\t\t\t\ttoolbar: [\n\t\t\t\t\t'font',\n\t\t\t\t\tnull,\n\t\t\t\t\t'fontSize',\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'bold', className: 'btn-info'},\n\t\t\t\t\t{name: 'italic', className: 'btn-info'},\n\t\t\t\t\t{name: 'strikethrough', className: 'btn-info'},\n\t\t\t\t\t{name: 'underline', className: 'btn-info'},\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'insertunorderedlist', className: 'btn-success'},\n\t\t\t\t\t{name: 'insertorderedlist', className: 'btn-success'},\n\t\t\t\t\t{name: 'outdent', className: 'btn-purple'},\n\t\t\t\t\t{name: 'indent', className: 'btn-purple'},\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'justifyleft', className: 'btn-primary'},\n\t\t\t\t\t{name: 'justifycenter', className: 'btn-primary'},\n\t\t\t\t\t{name: 'justifyright', className: 'btn-primary'},\n\t\t\t\t\t{name: 'justifyfull', className: 'btn-inverse'},\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'createLink', className: 'btn-pink'},\n\t\t\t\t\t{name: 'unlink', className: 'btn-pink'},\n\t\t\t\t\tnull,\n\t\t\t\t\tnull,\n\t\t\t\t\tnull,\n\t\t\t\t\t'foreColor',\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'undo', className: 'btn-grey'},\n\t\t\t\t\t{name: 'redo', className: 'btn-grey'}\n\t\t\t\t],\n\t\t\t\t'wysiwyg': {\n\t\t\t\t\t/* fileUploadError: showErrorAlert */\n\t\t\t\t}\n\t\t\t}).prev().addClass('wysiwyg-style2');\n\n\t\t\tif ($(this).hasClass(\"wysiwyg-editor-disabled\"))\n\t\t\t\t$(this).attr(\"contenteditable\", \"false\");\n\t\t});\n\n\t\t$(\".datepicker\").datetimepicker({\n\t\t\tdayOfWeekStart: 1,\n\t\t\t// mask: true,\n\t\t\tformat: \"d/m/Y\",\n\t\t\tcloseOnDateSelect: true,\n\t\t\ttimepicker: false,\n\t\t\tscrollInput: false\n\t\t}); //TODO impostare lingua e mettere data di default\n\n\t\tvar date = new Date(2016, 01, 01, 06, 45, 00), interval = 15, arrTime = [];\n\t\tfor (var i = 0; i < (12 * 4); i++) {\n\t\t\tdate.setMinutes(date.getMinutes() + interval);\n\t\t\tarrTime.push(date.getHours() + '.' + date.getMinutes());\n\t\t}\n\n\t\t$(\".datetimepicker\").datetimepicker({\n\t\t\tdayOfWeekStart: 1,\n\t\t\t// mask: true,\n\t\t\tformat: \"d/m/Y H:i\",\n\t\t\tstep: 30,\n\t\t\tcloseOnTimeSelect: true,\n\t\t\tscrollInput: false,\n\t\t\tallowTimes: arrTime\n\t\t});\n\n\t\t$(\"[data-interaction=dropzone]\").each(function () {\n\t\t\tvar url = $(this).attr(\"data-url\");\n\t\t\tvar parameters = $(this).attr(\"data-parameters\") || \"\";\n\t\t\tvar callback = $(this).attr(\"data-callback\") || null;\n\n\t\t\tif(!$(this).attr('dropzoned')) {\n\t\t\t\t$(this).attr('dropzoned', 'true');\n\n\t\t\t\t$(this).dropzone(\n\t\t\t\t\t{\n\t\t\t\t\t\turl: url + parameters,\n\t\t\t\t\t\theaders: $.ajaxSetup().headers,\n\t\t\t\t\t\tpreviewTemplate : '<div style=\"display:none\"></div>',\n\t\t\t\t\t\tsuccess: function (file, data) {\n\t\t\t\t\t\t\tapp.blockUI(0);\n\t\t\t\t\t\t\t$('.dz-preview').detach();\n\n\t\t\t\t\t\t\tif(callback) {\n\t\t\t\t\t\t\t\tfunctionCallBack = eval(callback);\n\t\t\t\t\t\t\t\tif (typeof functionCallBack == 'function') {\n\t\t\t\t\t\t\t\t\tfunctionCallBack($(this), data);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Callback non trovata: \" + callback);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function () {\n\t\t\t\t\t\t\tapp.blockUI(0);\n\t\t\t\t\t\t\tapp.error(\"Errore in fase di caricamento\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tapp.initAutocomplete();\n\n\t},\n\n\tlocationHref: function (url, withBlank) {\n\n\t\twithBlank = withBlank || 0;\n\n\t\t//if (noBlockUI == 0)\n\t\t//\tapp.blockUI(true);\n\n\t\tif(url) url = url.replace(\"#\", \"\");\n\t\tif(url.indexOf(app.baseUrl) < 0) {\n\t\t\tif(url[0] == \"/\") url = url.substring(1, url.length);\n\t\t\turl = app.baseUrl + \"/\" + url;\n\t\t}\n\n\t\tif (withBlank == 1) {\n\t\t\twindow.open(\n\t\t\t\turl,\n\t\t\t\t'_blank'\n\t\t\t);\n\t\t\t//app.blockUI(false);\n\t\t}\n\t\telse {\n\t\t\t// se non è stato aggiunto base_url lo aggiungo in automatico\n\t\t\tif(document.URL.replace(\"#\", \"\") == url) {\n\t\t\t\tapp.reload();\n\t\t\t} else {\n\t\t\t\twindow.location.href = url;\n\t\t\t}\n\t\t}\n\n\t},\n\n\thref: function (url) {\n\t\tapp.locationHref(url);\n\t},\n\n\tblock: function (blk) {\n\t\tif (blk) {\n\t\t\t// BlockUI\n\t\t\t$.blockUI({\n\t\t\t\tmessage: 'CARICAMENTO IN CORSO...',\n\t\t\t\tcss: {\n\t\t\t\t\tborder: 'none',\n\t\t\t\t\tpadding: '15px',\n\t\t\t\t\tbackgroundColor: '#000',\n\t\t\t\t\t'border-radius': '10px',\n\t\t\t\t\topacity: .8,\n\t\t\t\t\tcolor: '#fff'\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$.unblockUI();\n\t\t}\n\t},\n\n\tlocation: function (location) {\n\t\tapp.block(1);\n\t\twindow.location.href = location;\n\t},\n\n\treload: function () {\n\t\tapp.blockUI(true);\n\n\t\t// AJAX\n\t\t$('#page-content-section').ace_ajax(\"reload\");\n\n\t\tapp.blockUI(false);\n\t},\n\n\tsetLoading: function (active) {\n\n\t},\n\n\t/**\n\t * Mostra un confirm\n\t */\n\trequestConfirm: function (title, message) {\n\n\t\tvar passVerificata = false;\n\n\t\tif (confirm(message)) {\n\n\t\t\tvar password = prompt(\"Inserire la password di conferma\");\n\n\t\t\tif ($.trim(password) != \"\") {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: \"?p=server&a=checkPassword\",\n\t\t\t\t\tasync: false,\n\t\t\t\t\tdata: \"password=\" + password,\n\t\t\t\t\tsuccess: function (data) {\n\n\t\t\t\t\t\tif (data.response) {\n\t\t\t\t\t\t\tpassVerificata = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.error(data.message);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn passVerificata;\n\t},\n\n\t/**\n\t * Mostra un GRITTER messaggio di warning\n\t */\n\twarning: function (title, message) {\n\t\t$.gritter.add({\n\t\t\ttitle: title,\n\t\t\ttext: message,\n\t\t\tclass_name: 'gritter-warning'\n\t\t});\n\t},\n\n\t/**\n\t * Mostra un GRITTER messaggio di error\n\t */\n\terror: function (title, message) {\n\t\t$.gritter.add({\n\t\t\ttitle: title,\n\t\t\ttext: message,\n\t\t\tclass_name: 'gritter-error',\n\t\t});\n\t},\n\n\t/**\n\t * Mostra un GRITTER messaggio di successo\n\t */\n\tsuccess: function (title, message) {\n\t\t$.gritter.add({\n\t\t\t// (string | mandatory) the heading of the notification\n\t\t\ttitle: title,\n\t\t\t// (string | mandatory) the text inside the notification\n\t\t\ttext: message,\n\t\t\tclass_name: 'gritter-success'\n\t\t});\n\t},\n\n\tblockUI: function (blk, message) {\n\t\tif (app.dontBlock)\n\t\t\treturn;\n\n\t\tif (blk) {\n\t\t\t// BlockUI\n\t\t\t$.blockUI({\n\t\t\t\tmessage: message || \"Caricamento in corso\",\n\t\t\t\tcss: {\n\t\t\t\t\tborder: 'none',\n\t\t\t\t\tpadding: '15px',\n\t\t\t\t\tbackgroundColor: '#000',\n\t\t\t\t\t'border-radius': '10px',\n\t\t\t\t\topacity: .8,\n\t\t\t\t\tcolor: '#fff'\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$.unblockUI();\n\t\t}\n\t},\n\tdontBlock: false,\n\n\tautocomplizer: function (objSelect, idNewObject, funcSelect, funcNothingSelected, funcBeginWithSelected, myClass) {\n\n\t\tvar hasOptionSelected = objSelect.find('option:selected').length;\n\t\tif (hasOptionSelected != 0) {\n\t\t\tvar selectedText = objSelect.find('option:selected').text();\n\t\t\tvar selectedValue = objSelect.find('option:selected').val();\n\t\t}\n\n\t\tif (!myClass)\n\t\t\tmyClass = objSelect.attr(\"class\");\n\n\t\tvar autoc = $(\"<input type='text' class='\" + myClass + \"' id='\" + idNewObject + \"'>\");\n\t\tvar aVal = [];\n\t\tobjSelect.find('option').each(function (index, obj) {\n\t\t\taVal.push({\n\t\t\t\tid: $(obj).val(),\n\t\t\t\tvalue: $(obj).text()\n\t\t\t});\n\t\t})\n\n\t\tobjSelect.replaceWith(autoc);\n\n\t\tvar hidden_original = $(\"<input type='hidden' id='\" + objSelect.attr('id') + \"' name='\" + objSelect.attr('name') + \"'>\");\n\t\tautoc.parent().append(hidden_original);\n\n\t\tif (!funcSelect) {\n\t\t\tfuncSelect = function (id, value) {\n\t\t\t\t$(\"#\" + idNewObject).val(value);\n\t\t\t\thidden_original.val(id);\n\t\t\t};\n\t\t}\n\t\tif (!funcNothingSelected) {\n\t\t\tfuncNothingSelected = function () {\n\t\t\t\thidden_original.val(0);\n\t\t\t};\n\t\t}\n\t\tif (!funcBeginWithSelected) {\n\t\t\tfuncBeginWithSelected = function (text, value) {\n\t\t\t\t$(\"#\" + idNewObject).val(text);\n\t\t\t\thidden_original.val(value);\n\t\t\t};\n\t\t}\n\n\t\tif (hasOptionSelected != 0) {\n\t\t\tfuncBeginWithSelected(selectedText, selectedValue);\n\t\t}\n\n\t\t$('#' + idNewObject).autocomplete({\n\t\t\tsource: aVal,\n\t\t\tfocus: function () {\n\t\t\t\t$(this).trigger('keydown.autocomplete');\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tfuncSelect(ui.item.id, ui.item.value);\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tchange: function (event, ui) {\n\t\t\t\tif (ui.item == null)\n\t\t\t\t\tfuncNothingSelected();\n\t\t\t},\n\t\t});\n\t},\n\tsetLanguage: function (shortCode) {\n\t\t$.cookie('app_language', shortCode);\n\t},\n\tscreenshotPreview: function () {\n\n\t\txOffset = 10;\n\t\tyOffset = 30;\n\n\t\t$(\"a.imagePreview\").hover(function (e) {\n\t\t\t\tthis.t = this.title;\n\t\t\t\tthis.title = \"\";\n\t\t\t\tvar c = (this.t != \"\") ? \"<br/>\" + this.t : \"\";\n\t\t\t\t$(\"body\").append(\"<p id='imagePreview'><img src='\" + this.rel + \"' alt='Preview' />\" + c + \"</p>\");\n\t\t\t\t$(\"#imagePreview\")\n\t\t\t\t\t.css(\"top\", (e.pageY - xOffset) + \"px\")\n\t\t\t\t\t.css(\"left\", (e.pageX + yOffset) + \"px\")\n\t\t\t\t\t.fadeIn(\"fast\");\n\t\t\t},\n\t\t\tfunction () {\n\t\t\t\tthis.title = this.t;\n\t\t\t\t$(\"#imagePreview\").remove();\n\t\t\t});\n\t\t$(\"a.imagePreview\").mousemove(function (e) {\n\t\t\t$(\"#imagePreview\")\n\t\t\t\t.css(\"top\", (e.pageY - xOffset) + \"px\")\n\t\t\t\t.css(\"left\", (e.pageX + yOffset) + \"px\");\n\t\t});\n\t},\n\n\tplatform: {\n\t\tdetection: function () {\n\t\t\tif (navigator.platform.indexOf(\"iPad\", 0) >= 0)\n\t\t\t\treturn (\"ios\");\n\t\t\telse if (navigator.platform.indexOf(\"iPhone\", 0) >= 0)\n\t\t\t\treturn (\"ios\");\n\t\t\telse if (navigator.userAgent.indexOf(\"Android\", 0) >= 0)\n\t\t\t\treturn (\"android\");\n\t\t\telse\n\t\t\t\treturn \"desktop\";\n\t\t},\n\t\tdeviceType: function () {\n\t\t\tif (navigator.platform.indexOf(\"iPad\", 0) >= 0)\n\t\t\t\treturn (\"tablet\");\n\t\t\telse if (navigator.platform.indexOf(\"iPhone\", 0) >= 0)\n\t\t\t\treturn (\"phone\");\n\t\t\telse if (navigator.userAgent.indexOf(\"Android\", 0) >= 0) {\n\t\t\t\tif (navigator.userAgent.indexOf(\"Mobile\", 0) >= 0)\n\t\t\t\t\treturn (\"phone\");\n\t\t\t\telse\n\t\t\t\t\treturn (\"tablet\");\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn \"tablet\";\n\t\t},\n\t\tisMobile: function () {\n\t\t\treturn app.platform.detection() != \"desktop\";\n\t\t}\n\t},\n\t\n\tformSubmit: function(url, form, params, success, error) {\n\t\tsuccess = success || function() {};\n\t\terror = error || function() {};\n\t\tform = form || undefined;\n\t\tvar $form = form;\n\t\tif(!form){\n\t\t\tapp.warning(\"form undefined\");\n\t\t\treturn;\n\t\t}\n\n\t\tif(typeof form == 'string')\n\t\t\t$form = $(form);\n\t\telse\n\t\t\t$form = form; //oggetto\n\n\t\tvar $method = null;\n\t\tif($form.attr(\"data-id\") && $form.attr(\"data-id\") > 0){\n\t\t\t$method = $.put;\n\t\t\turl += \"/\" + $form.attr(\"data-id\");\n\t\t}else{\n\t\t\t$method = $.post;\n\t\t}\n\n\t\t$form.find('.error-block').removeClass('show');\n\n\t\tvar aParam = lib.formSerialize($form);\n\t\taParam = $.extend({}, aParam, params);\n\n\t\t$method(url, aParam)\n\t\t\t.success(function(data) {\n\t\t\t\tsuccess(data);\n\t\t\t})\n\t\t\t.error(function(data) {\n\t\t\t\tif(data.status = 422) {\n\t\t\t\t\tvar errors = data.responseJSON;\n\t\t\t\t\tObject.keys(errors).forEach(function(k) {\n\t\t\t\t\t\tvar $error = undefined;\n\t\t\t\t\t\tvar name = k;\n\t\t\t\t\t\tif(k.indexOf(\".\") > -1) {\n\t\t\t\t\t\t\t// l'elemento è un array\n\t\t\t\t\t\t\tname = k.replace(\".\", \"[\") + \"]\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif($form.find('[data-name=\"' + name + '\"]').length > 0) {\n\t\t\t\t\t\t\t$error = $form.find('[data-name=\"' + name + '\"]');\n\t\t\t\t\t\t\t$error.html(errors[k]);\n\t\t\t\t\t\t\t$error.addClass('show');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// lo spazio per mostrare l'errore non c'è. Lo creo\n\t\t\t\t\t\t\tvar $field = $('[name=\"' + name + '\"]');\n\t\t\t\t\t\t\tif($field) {\n\t\t\t\t\t\t\t\tvar $parent = $field.parent();\n\t\t\t\t\t\t\t\t$error = $('<span class=\"error-block show\" data-name=\"' + name + '\">' + errors[k] + '</span>');\n\t\t\t\t\t\t\t\t$parent.append($error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\terror(data);\n\t\t\t});\n\t}\n};\n\n/**\n * Estensione jquery per metodi put e delete ajax\n */\njQuery.each( [ \"put\", \"delete\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\t\t\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\nvar lib = {\n\tdataPrintTrue: \"þ\",\n\tdataPrintFalse: \"¨\",\n\t/**\n\t * Converte un array di parameteri in formato p1=1&p2=2... in un oggetto json\n\t */\n\tconvertGetParamInJSON: function (stringParameters) {\n\t\tvar hash;\n\t\tvar ret = {};\n\t\tvar hashes = stringParameters.split('&');\n\t\tfor (var i = 0; i < hashes.length; i++) {\n\t\t\thash = hashes[i].split('=');\n\t\t\tif (typeof hash[0] != \"undefined\") {\n\t\t\t\tret[hash[0]] = (typeof hash[1] != \"undefined\") ? hash[1] : \"\";\n\t\t\t}\n\n\t\t}\n\t\treturn ret;\n\t},\n\n\t/**\n\t * Da utilizzare sul form - submit\n\t */\n\tformSerialize: function (form, print) {\n\n\t\tvar o = {};\n\t\tvar a = form.serializeArray();\n\t\t// fix x aggiungere anche i check deselezionati\n\t\ta = a.concat(\n\t\t\tform.find('input[type=checkbox]:not(:checked)').map(\n\t\t\t\tfunction () {\n\t\t\t\t\treturn {\"name\": this.name, \"value\": 0}\n\t\t\t\t}).get()\n\t\t);\n\n\t\t$.each(a, function () {\n\n\t\t\tvar value = this.value;\n\n\t\t\tvar procedi = true;\n\n\t\t\tif (form.find('[name=\"' + this.name + '\"]').attr('type') == 'checkbox') {\n\n\t\t\t\tif (this.value == 'on' || parseInt(this.value) == 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = 0;\n\t\t\t\t}\n\n\t\t\t\tif (typeof form.find('[name=\"' + this.name + '\"]').attr('data-returnvalue') != \"undefined\") {\n\t\t\t\t\tif (value == 0)\n\t\t\t\t\t\tprocedi = false;\n\n\t\t\t\t\tvalue = form.find('[name=\"' + this.name + '\"]').attr('data-returnvalue');\n\t\t\t\t}\n\n\t\t\t\tif (print) {\n\t\t\t\t\tvalue = form.find('[name=\"' + this.name + '\"]').is(\":checked\") ? lib.dataPrintTrue : lib.dataPrintFalse;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (procedi) {\n\t\t\t\tif (o[this.name] !== undefined) {\n\t\t\t\t\tif (!o[this.name].push) {\n\t\t\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t\t\t}\n\t\t\t\t\to[this.name].push((value == undefined) ? \"\" : value);\n\t\t\t\t} else {\n\t\t\t\t\to[this.name] = (value == undefined) ? \"\" : value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn o;\n\t},\n\n\tqueryStringSerialize: function (obj) {\n\t\tvar str = [];\n\t\tfor (var p in obj)\n\t\t\tif (obj.hasOwnProperty(p)) {\n\t\t\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n\t\t\t}\n\t\treturn str.join(\"&\");\n\t},\n\n\t/**\n\t * Copia gli attributi di un elemento dentro un altro\n\t */\n\tcopyAttributesToOtherElement: function (elemOrig, elemDest) {\n\t\tvar attributes = elemOrig.prop(\"attributes\");\n\n\t\t// loop through <select> attributes and apply them on <div>\n\t\t$.each(attributes, function () {\n\t\t\telemDest.attr(this.name, this.value);\n\t\t});\n\t},\n\n\ttoday: function () {\n\t\tvar today = new Date();\n\t\tvar dd = today.getDate();\n\t\tvar mm = today.getMonth() + 1; //January is 0!\n\t\tvar yyyy = today.getFullYear();\n\n\t\tif (dd < 10) {\n\t\t\tdd = '0' + dd;\n\t\t}\n\n\t\tif (mm < 10) {\n\t\t\tmm = '0' + mm;\n\t\t}\n\n\t\treturn mm + '/' + dd + '/' + yyyy;\n\t}\n\n};\n\nvar loader = {\n\tdownload: function (show, text) {\n\t\tshow = show || 0;\n\t\tvar modalId = \"#modalLoader\";\n\t\tif (show) {\n\t\t\ttext = text || \"Generazione del documento in corso...\";\n\t\t\ttext = \"<h3 style='text-align:center'><i class='ace-icon fa fa-spinner fa-spin orange bigger-125' ></i> \" + text + \"</h3>\";\n\t\t\t$(modalId + ' h4.modal-title').html('Attendere...');\n\t\t\t$(modalId + ' .modal-body').html(text);\n\t\t\t$(modalId + ' .btn-primary').hide();\n\t\t\t$(modalId + ' .btn-default').text('Chiudi');\n\n\t\t\t$(modalId + ' .btn-default').unbind(\"click\").bind('click', function () {\n\t\t\t\t$(modalId + ' .close').trigger('click');\n\t\t\t});\n\n\t\t\t$(modalId).modal('show');\n\t\t} else {\n\t\t\t$(modalId + ' .close').trigger('click');\n\t\t}\n\t}\n};","var crud = function(options) {\n\n\tthis.bindEvents = function() {\n\t\t$('[data-interaction=delete]').unbind('click').bind('click', function() {\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\tvar error = $(this).attr('data-error');\n\t\t\tvar reload = $(this).attr('data-reload');\n\t\t\tvar href = $(this).attr('data-href');\n\n\t\t\tapp.block(1);\n\t\t\t$.delete(url)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tif(data.response) {\n\t\t\t\t\t\tif(reload) app.reload();\n\t\t\t\t\t\tif(href) app.href(href);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.warning(\"\", data.message);\n\t\t\t\t\t}\n\t\t\t\t\tapp.block(0);\n\t\t\t\t})\n\t\t\t\t.error(function() {\n\t\t\t\t\tapp.block(0);\n\t\t\t\t\tapp.error('', 'Delete error!');\n\t\t\t\t});\n\t\t});\n\n\t\t$('[data-interaction=save]').unbind('click').bind('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar error = $(this).attr('data-error');\n\t\t\tvar reload = $(this).attr('data-reload');\n\t\t\tvar href = $(this).attr('data-href');\n\n\t\t\tapp.block(1);\n\t\t\tapp.formSubmit($(\"#\" + options.form).attr(\"action\"), $(\"#\" + options.form), {}, function(data) {\n\t\t\t\tif(data.response) {\n\t\t\t\t\tapp.success(\"\", \"Saved!\");\n\t\t\t\t\tif(reload) app.reload();\n\t\t\t\t\tif(href) app.href(href);\n\t\t\t\t} else {\n\t\t\t\t\tapp.warning(\"\", data.message);\n\t\t\t\t}\n\t\t\t\tapp.block(0);\n\t\t\t}, function() {\n\t\t\t\tapp.error(\"\", error);\n\t\t\t\tapp.block(0);\n\t\t\t});\n\t\t});\n\t};\n\n\tthis.bindEvents();\n\n};","/**\n * This plug-in for DataTables represents the ultimate option in extensibility\n * for sorting date / time strings correctly. It uses\n * [Moment.js](http://momentjs.com) to create automatic type detection and\n * sorting plug-ins for DataTables based on a given format. This way, DataTables\n * will automatically detect your temporal information and sort it correctly.\n *\n * For usage instructions, please see the DataTables blog\n * post that [introduces it](//datatables.net/blog/2014-12-18).\n *\n * @name Ultimate Date / Time sorting\n * @summary Sort date and time in any format using Moment.js\n * @author [Allan Jardine](//datatables.net)\n * @depends DataTables 1.10+, Moment.js 1.7+\n *\n * @example\n *    $.fn.dataTable.moment( 'HH:mm MMM D, YY' );\n *    $.fn.dataTable.moment( 'dddd, MMMM Do, YYYY' );\n *\n *    $('#example').DataTable();\n */\n\n(function (factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([\"jquery\", \"moment\", \"datatables\"], factory);\n    } else {\n        factory(jQuery, moment);\n    }\n}(function ($, moment) {\n\n    $.fn.dataTable.moment = function (format, locale) {\n        var types = $.fn.dataTable.ext.type;\n\n        // Add type detection\n        types.detect.unshift(function (d) {\n            // Strip HTML tags if possible\n            if (d && d.replace) {\n                d = d.replace(/<.*?>/g, '');\n            }\n\n            // Null and empty values are acceptable\n            if (d === '' || d === null) {\n                return 'moment-' + format;\n            }\n\n            return moment(d, format, locale, true).isValid() ?\n            'moment-' + format :\n                null;\n        });\n\n        // Add sorting method - use an integer for the sorting\n        types.order['moment-' + format + '-pre'] = function (d) {\n            if (d && d.replace) {\n                d = d.replace(/<.*?>/g, '');\n            }\n            return d === '' || d === null ?\n                -Infinity :\n                parseInt(moment(d, format, locale, true).format('x'), 10);\n        };\n    };\n\n}));\n\nvar dataTable = function (options) {\n\n    if (!options) {\n        console.error(\"Specify options!\");\n        return;\n    }\n\n    var dataTable = this;\n\n    this.idTable = \"\";\n    this.subTableTemplate = \"subTableTemplate\";\n    this.subBodyTemplate = \"subBodyTemplate\";\n    this.table = undefined;\n\n    this.fixedHeader = options.fixedHeader || false;\n    this.csv = options.csv || false;\n    this.pdf = options.pdf || false;\n    this.idTable = options.idTable || \"\";\n    this.columns = options.columns || undefined;\n    this.filterColumns = options.filterColumns || undefined;\n    this.lenghtMenu = options.lenghtMenu || [[10, 50, 100, -1], [\"10\", \"50\", \"100\", \"---\"]];\n    this.footerCallback = options.footerCallback || function () {\n        };\n\n    this.$table = $(\"#\" + dataTable.idTable);\n\n    // titolo stampato\n    this.title = this.$table.attr(\"data-dt-title\");\n    if (!this.title) this.title = \"\";\n\n    // ajax Url per server processing\n    this.ajaxUrl = this.$table.attr(\"data-dt-url\");\n\n    this.ajaxUrlParameters = this.$table.attr(\"data-dt-url-parameters\");\n\n\n    // funzione per customizzare la stampa pdf\n    this.printCallback = function (doc) {\n        var colCount = [];\n        dataTable.$table.find('tbody tr:first-child td').each(function () {\n            if ($(this).attr('colspan')) {\n                for (var i = 1; i <= $(this).attr('colspan'); i++) {\n                    colCount.push('*');\n                }\n            } else {\n                colCount.push('*');\n            }\n        });\n        if (doc.content[1].table) {\n            doc.content[1].table.widths = colCount;\n        }\n    };\n    // override funzione stampa\n    if (this.$table.attr(\"data-dt-print\")) this.printCallback = this.$table.attr(\"data-dt-print\");\n\n    // funzione per customizzare l'export\n    this.exportCallback = this.$table.attr(\"data-dt-export\");\n\n    // funzione che crea l'array di colonne per la dataTable\n    this.makeColumns = function () {\n        var doSort = (dataTable.columns === undefined || dataTable.columns == undefined);\n        var doFilter = (dataTable.filterColumns === undefined || dataTable.filterColumns == undefined);\n        if (doSort) dataTable.columns = [];\n        if (doFilter) dataTable.filterColumns = [];\n        var sort = undefined;\n        var filter = undefined;\n        var type = undefined;\n        var baseType = undefined;\n\n        dataTable.$table.find(\"thead\").find(\"tr\").find(\"th\").each(function (index) {\n            type = $(this).attr(\"data-dt-type\");\n            sort = $(this).attr(\"data-dt-sort\");\n            filter = $(this).attr(\"data-dt-filter\");\n            baseType = $(this).attr(\"data-dt-baseType\");\n\n            if (typeof $(this).attr(\"data-dt-inline-button\") != 'undefined') {\n                var colBtnVisible = false;\n                if ($(this).attr(\"data-dt-inline-button\") == \"1\") {\n                    // colonna bottoni inline\n                    colBtnVisible = true;\n                    var buttonsConfig = $(this).attr(\"data-dt-button\") || 'edit|delete';\n                    var editUrl = $(this).attr(\"data-dt-edit-url\") || dataTable.ajaxUrl;\n                    var deleteUrl = $(this).attr(\"data-dt-delete-url\") || dataTable.ajaxUrl;\n                    var buttons = \"\";\n                    $.each(buttonsConfig.split(\"|\"), function (index, obj) {\n                        switch (obj) {\n                            case \"edit\":\n                                buttons = buttons + '<a data-interaction=\"edit\" href=\"' + editUrl + '\" class=\"btn btn-xs btn-warning\"><i class=\"fa fa-pencil\"></i></a>';\n                                break;\n                            case \"delete\":\n                                buttons = buttons + '<button data-interaction=\"delete\" data-url=\"' + deleteUrl + '\" class=\"btn btn-xs btn-danger\"><i class=\"fa fa-trash\"></i></button>';\n                                break;\n                        }\n                    });\n                }\n\n                dataTable.columns.push({\n                    data: null,\n                    defaultContent: buttons,\n                    className: 'btn-inline-edit',\n                    orderable: false,\n                    visible: colBtnVisible,\n                    createdCell: function (td, cellData) {\n                        $(td).find('[data-interaction=delete]').attr(\"data-url\", deleteUrl + \"/\" + cellData[0]);\n                        $(td).find('[data-interaction=edit]').attr(\"href\", editUrl + \"/\" + cellData[0] + \"/edit\");\n                    }\n                });\n            } else {\n                // colonne dati\n                var formatterFunction = $(this).attr(\"data-dt-formatterjs\") || undefined;\n                var align = $(this).attr(\"data-dt-align\") || undefined;\n                if (!baseType) baseType = 'string';\n                if (doSort) {\n                    var objColumn = {};\n                    if (sort !== undefined && sort != undefined && typeof sort != \"undefined\" && sort != \"false\" && sort != \"0\") {\n                        if (type) {\n                            objColumn = {\"bSortable\": true, \"orderDataType\": type, \"type\": baseType};\n                        } else {\n                            objColumn = {\"bSortable\": true};\n                        }\n                    } else {\n                        objColumn = {\"bSortable\": false};\n                    }\n\n                    if (align) {\n                        objColumn.sClass = \"text-\" + align\n                    }\n\n                    if (formatterFunction) {\n                        var formatterFunctionCallback = null;\n\n                        try {\n                            // il formatter è parte del set base dei formatter\n                            if (typeof(window['formatter']) == 'object')\n                                if (typeof(window['formatter'][formatterFunction]) == 'function')\n                                    formatterFunctionCallback = window['formatter'][formatterFunction];\n\n                            // il formatter è una funzione custom nella forma 'nomeFunzione' o 'oggetto.nomeFunzione'\n                            if (formatterFunctionCallback == null) {\n                                if (typeof(window[formatterFunction]) == 'function') {\n                                    formatterFunctionCallback = window[formatterFunction];\n                                } else if (formatterFunction.indexOf('.') > 0) {\n                                    var fnObj = formatterFunction.split('.')[0];\n                                    var fnFunction = formatterFunction.split('.')[1];\n\n                                    if (typeof(window[fnObj][fnFunction]) == 'function') {\n                                        formatterFunctionCallback = window[fnObj][fnFunction];\n                                    }\n                                }\n                            }\n\n                            if (typeof formatterFunctionCallback == 'function') {\n                                objColumn.createdCell = function (td, cell_data, row_data) {\n                                    $(td).html(formatterFunctionCallback(cell_data, row_data));\n                                };\n                            } else {\n                                console.warn(\"Callback '\" + formatterFunction + \"' not found (column index: \" + index + \")\");\n                            }\n                        }\n                        catch (err) {\n                            console.warn(\"Callback '\" + formatterFunction + \"' not found (column index: \" + index + \")\");\n                        }\n                    }\n\n\n                    dataTable.columns.push(objColumn);\n                }\n\n                if (doFilter) {\n                    if (filter !== undefined && filter != undefined && typeof filter != \"undefined\" && filter != \"false\" && filter != \"0\") {\n                        dataTable.filterColumns[index] = {index: index, type: type};\n                    }\n                }\n            }\n        });\n    };\n\n    this.makeFilters = function () {\n        var filter = dataTable.$table.find('thead').attr(\"data-dt-enable-filter\");\n        if (filter !== undefined && filter != undefined && typeof filter != \"undefined\" && filter != \"false\" && filter != \"0\") {\n            /**\n             * Ho abilitato i filtri.\n             * Creo una nuova tr dove ci saranno i filtri\n             */\n            var n = dataTable.$table.find(\"thead\").find(\"tr\").find(\"th\").length;\n            var $tr = $('<tr></tr>');\n            for (var i = 0; i < n; i++) {\n                var $th = $('<th data-filter=\"' + i + '\"></th>');\n                $tr.append($th);\n            }\n            var content = dataTable.$table.find(\"thead\").html();\n            dataTable.$table.find(\"thead\").html($tr);\n            dataTable.$table.find(\"thead\").append(content);\n        }\n    };\n\n    this.makeSorting = function () {\n        // date\n        $.fn.dataTable.moment('DD/MM/YYYY');\n\n        // numeric\n        $.fn.dataTable.ext.order['numeric'] = function (settings, col) {\n            return this.api().column(col, {order: 'index'}).nodes().map(function (td, i) {\n                var value = $(td).html().trim();\n                value = value.split(\",\").join(\"\");\n                value = value.split(\"--\").join(\"0\");\n                return parseFloat(value);\n            });\n        };\n\n        // numeric comma\n        $.fn.dataTable.ext.order['numeric-comma'] = function (settings, col) {\n            return this.api().column(col, {order: 'index'}).nodes().map(function (td, i) {\n                var value = $(td).html().trim();\n                value = value.split(\".\").join(\"\");\n                value = value.split(\",\").join(\".\");\n                value = value.split(\"--\").join(\"0\");\n                return parseFloat(value);\n            });\n        };\n    };\n\n    /**\n     * Funzione da overridare\n     * @constructor\n     */\n    this.DTfnBeforeDrawCallback = function () {};\n\n    this.DTfnDrawCallback = function () {\n        dataTable.DTfnBeforeDrawCallback();\n        dataTable.bindEvents();\n        dataTable.DTfnAfterDrawCallback();\n    };\n\n    /**\n     * Funzione da overridare\n     * @constructor\n     */\n    this.DTfnAfterDrawCallback = function () {};\n\n    /**\n     * Funzione da overridare\n     * @constructor\n     */\n    this.DTbeforeInitComplete = function(){};\n    /**\n     * Funzione da overridare\n     * @constructor\n     */\n    this.DTafterInitComplete = function(){};\n\n    this.DTinitComplete = function () {\n\n        dataTable.DTbeforeInitComplete();\n\n        this.api().columns().every(function (i) {\n            if (dataTable.filterColumns[i]) {\n                var column = this;\n                var $search = undefined;\n                if (dataTable.filterColumns[i].type) {\n                    if (dataTable.filterColumns[i].type == \"date\") {\n                        // TODO datepicker\n                    }\n                } else {\n                    // Select 2\n                    $search = $('<select class=\"chosen-select\" style=\"width: 100%;\" data-placeholder=\" \"><option value=\"\"></option></select>')\n                        .appendTo($(\"[data-filter='\" + i + \"']\").empty())\n                        .on('change', function () {\n                            // var val = $.fn.dataTable.util.escapeRegex($(this).val());\n                            var val = $(this).val();\n                            column.search(val ? val : '', true, false).draw();\n                        });\n\n                    column.data().unique().sort().each(function (d) {\n                        $search.append('<option value=\"' + d + '\">' + d + '</option>')\n                    });\n\n                    var $field = $(column.header()).attr(\"data-dt-field\") || undefined;\n\n                    var $fieldUrl = $(column.header()).attr(\"data-dt-field-url\") || dataTable.ajaxUrl + \"?dt=1\";\n\n                    if (typeof $field != 'undefined') {\n                        $search.select2({\n                            ajax: {\n                                url: $fieldUrl + \"&op=autocomplete&autocomplete=\" + $field,\n                                dataType: 'json',\n                                delay: 250,\n\n                                data: function (params) {\n                                    return {\n                                        search: params.term, // search term\n                                        page: params.page\n                                    };\n                                },\n                                processResults: function (data, params) {\n                                    // parse the results into the format expected by Select2\n                                    // since we are using custom formatting functions we do not need to\n                                    // alter the remote JSON data, except to indicate that infinite\n                                    // scrolling can be used\n                                    params.page = params.page || 1;\n\n                                    return {\n                                        results: data.items\n                                        /*pagination: {\n                                         more: (params.page * 30) < data.total_count\n                                         }*/\n                                    };\n                                },\n                                cache: true\n                            },\n                            escapeMarkup: function (markup) {\n                                return markup;\n                            }, // let our custom formatter work\n                            minimumInputLength: 1,\n                            allowClear: true,\n                            cache: true,\n                            templateResult: formatData,\n                            templateSelection: formatDataSelection\n                        }).on(\"select2:unselecting\", function (e) {\n                            $(this).data('state', 'unselected');\n                        }).on(\"select2:open\", function (e) {\n                            if ($(this).data('state') === 'unselected') {\n                                $(this).removeData('state');\n\n                                var self = $(this);\n                                setTimeout(function () {\n                                    self.select2('close');\n                                }, 1);\n                            }\n                        });\n                        function formatData(data) {\n                            if (data.loading) return data.text;\n\n                            return data.text;// + \"<p>\" + data.otherData + \"</p>\";;\n                        }\n\n                        function formatDataSelection(data) {\n                            return data.text;\n                        }\n\n                    } else {\n                        $search.chosen({allow_single_deselect: true});\n                    }\n                }\n\n\n                // if (!dataTable.fixedHeader) {\n                // \t$search.each(function () {\n                // \t\t$(this).next().css({'width': '100%'});\n                // \t});\n                // }\n            }\n        });\n\n        dataTable.DTafterInitComplete();\n\n    };\n\n    this.DTfnCreatedRow = function (nRow, aData) {\n        $(nRow).attr('data-id', aData[0]);\n    };\n\n    this.bindEvents = function () {\n        dataTable.$table.find('thead').find('select').on('change', function () {\n            dataTable.bindEvents();\n        });\n\n        dataTable.$table.find('select[name=\"ordersTable_length\"]').on('change', function () {\n            dataTable.bindEvents();\n        });\n\n        dataTable.$table.find(\".paginate_button\").click(function () {\n            dataTable.bindEvents();\n        });\n\n        dataTable.$table.find('[data-interaction=\"subTable\"]').unbind(\"click\").bind(\"click\", function () {\n            var $tr = $(this).closest('tr');\n            var id = $(this).attr(\"data-id\");\n            var url = $(this).attr(\"data-url\");\n            var callbackName = $(this).attr(\"data-callback\");\n            var row = dataTable.table.row($tr);\n\n            // verifico se la callback esiste\n            var callback = false;\n            if (typeof callbackName != 'undefined') {\n                if (jQuery.isFunction(callbackName))\n                    callback = true;\n                if (jQuery.isFunction(eval(callbackName)))\n                    callback = true;\n            }\n\n            if (row.child.isShown()) {\n                row.child.hide();\n                $tr.removeClass('shown');\n            } else {\n                app.blockUI(1);\n                $.post(url, {id: id})\n                    .success(function (data) {\n                        if (data.response) {\n                            if (callback) {\n                                eval(callbackName)(row, data);\n                            } else {\n                                row.child(dataTable.setSubTable(data.message)).show();\n                                $tr.addClass('shown');\n                            }\n                        }\n                        app.blockUI(0);\n                    })\n                    .error(function () {\n                        app.blockUI(0);\n                    });\n            }\n        });\n\n        dataTable.$table.find('[data-interaction=delete]').unbind('click').bind('click', function () {\n            var url = $(this).attr('data-url');\n            var error = $(this).attr('data-error');\n            var reload = $(this).attr('data-reload');\n            var href = $(this).attr('data-href');\n\n            app.block(1);\n            $.delete(url)\n                .success(function (data) {\n                    if (data.response) {\n                        if (reload) app.reload();\n                        if (href) app.href(href);\n                    } else {\n                        app.warning(\"\", data.message);\n                    }\n                    app.block(0);\n                })\n                .error(function () {\n                    app.block(0);\n                    app.error('', 'Delete error!');\n                });\n        });\n\n        dataTable.$table.find('.select2-search:before').bind('click', function () {\n            console.log(\"Click!!!\");\n        });\n    };\n\n    this.makeDT = function () {\n        dataTable.table = dataTable.$table.DataTable({\n            bAutoWidth: false,\n            aoColumns: dataTable.columns,\n            aaSorting: [],\n            aLengthMenu: dataTable.lenghtMenu,\n            bLengthChange: true,\n            bPaginate: true,\n            select: true,\n            responsive: true,\n\n            // gestione server side ajax\n            processing: (typeof dataTable.ajaxUrl != 'undefined'),\n            serverSide: (typeof dataTable.ajaxUrl != 'undefined'),\n            ajax: (typeof dataTable.ajaxUrl != 'undefined') ? dataTable.ajaxUrl + \"?dt=1\" + (this.ajaxUrlParameters? \"&\" + this.ajaxUrlParameters : '') : false,\n\n            footerCallback: dataTable.footerCallback,\n            fnDrawCallback: dataTable.DTfnDrawCallback,\n            initComplete: dataTable.DTinitComplete,\n            fnCreatedRow: dataTable.DTfnCreatedRow\n        });\n\n        if (dataTable.fixedHeader) {\n            new $.fn.dataTable.FixedHeader(dataTable.table);\n        }\n\n        var buttons = [];\n\n        if (dataTable.csv) {\n            buttons.push({\n                extend: \"csvHtml5\",\n                text: \"<i class='fa fa-database bigger-110 orange'></i> <span class='hidden'>Export to CSV</span>\",\n                className: \"btn btn-white btn-primary btn-bold\",\n                fieldBoundary: \"\",\n                charset: false,\n                footer: true,\n                fieldSeparator: \";\",\n                customize: eval(dataTable.exportCallback)\n            });\n        }\n\n        if (dataTable.pdf) {\n            buttons.push({\n                extend: \"pdf\",\n                text: \"<i class='fa fa-print bigger-110 grey'></i> <span class='hidden'>Print</span>\",\n                className: \"btn btn-white btn-primary btn-bold\",\n                autoPrint: false,\n                footer: true,\n                orientation: 'landscape',\n                title: title,\n                customize: eval(dataTable.printCallback)\n            });\n        }\n\n        if (dataTable.csv || dataTable.pdf) {\n            new $.fn.dataTable.Buttons(dataTable.table, {\n                buttons: buttons\n            });\n            dataTable.table.buttons().container().appendTo($(\"#\" + dataTable.idTable + \"_wrapper\").find('.dataTables_filter'));\n        }\n\n        if (typeof dataTable.ajaxUrl != 'undefined') {\n            $(\"#\" + dataTable.idTable + \"_wrapper\").find('.dataTables_filter').hide();\n        }\n\n        dataTable.bindEvents();\n    };\n\n    this.setSubTable = function (data) {\n        var $subTable = $(\"[data-interaction=\" + dataTable.subTableTemplate + \"]\").clone();\n        var $tmpTable = $('<table></table>');\n        for (var i = 0; i < data.length; i++) {\n            var $subBody = $('[data-interaction=\"' + dataTable.subBodyTemplate + '\"]').clone();\n            $subBody.removeAttr(\"data-interaction\");\n            $subBody.find('[data-interaction=\"subTableField\"]').each(function () {\n                var target = $(this).attr(\"data-target\");\n                target = target || \"\";\n\n                if (data[i][target] !== undefined && data[i][target] != undefined && typeof data[i][target] != \"undefined\") {\n                    $(this).html(data[i][target]);\n                }\n            });\n            $tmpTable.append($subBody);\n        }\n\n        $subTable.find(\"tbody\").html($tmpTable.html());\n        return $subTable.html();\n    };\n\n    this.make = function () {\n        dataTable.makeColumns();\n        dataTable.makeFilters();\n        dataTable.makeSorting();\n        dataTable.makeDT();\n    };\n};","/**\n * TODO Implementare l'error handler per le chiamate ajax\n * @type {{xhr: eh.xhr}}\n */\nvar errorHandler = {\n\n    init:function(){\n        $(document).ajaxComplete(function myErrorHandler(event, xhr, ajaxOptions, thrownError) {\n            //console.log(xhr);\n            switch (xhr.status){\n\t\t\t\tcase 200:\n                    break;\n\t\t\t\t// case 404:\n\t\t\t\t// \t$(\"#page-content-section\").html(xhr.responseText);\n\t\t\t\t// \tbreak;\n                case 401:\n                    app.href(\"/login\");\n                    break;\n                default:\n                    console.log(\"ErrorHandler ... error status: \" + xhr.status);\n            }\n        });\n    },\n\n}","var formatter = {\n\n    bool: function(cell_data, row_data) {\n        return cell_data ? '<i style=\"color: green;\" class=\"fa fa-circle\"></i>' : '<i style=\"color: red;\" class=\"fa fa-circle\"></i>';\n    },\n\n    user_enabled: function(cell_data) {\n        var ret = \"\";\n\n        if(cell_data) {\n            ret = '<button data-interaction=\"enable\" data-disable=\"1\" class=\"btn btn-xs btn-success\"><i class=\"fa fa-check\"></i></button>'\n        } else {\n            ret = '<button data-interaction=\"enable\" class=\"btn btn-xs btn-danger\"><i class=\"fa fa-times\"></i></button>'\n        }\n\n        return ret;\n    }\n    \n};","var grid = {\n\tinit: function(obj, columns, grid_id){\n\t\tgrid.gridSelector = obj.selector;\n\n\t\t// modello colonne\n\t\tvar colModel = [];\n\n\t\t// numero di righe\n\t\tvar rowNum =  obj.attr('data-pager-rowNum') || 20;\n\n\t\t// oggetto paginatore\n\t\tvar pager = obj.attr('data-pager-selector') || null;\n\n\t\t/**\n\t\t * Attivazione raggruppamenti\n\t\t * @type {*|boolean}\n\t\t */\n\t\tvar url = obj.attr('data-url') || false;\n\t\tvar grouping = obj.attr('data-grouping') || false;\n\t\tvar forceParams = obj.attr(\"data-forceParams\") || \"\";\n\t\tvar subGrid = obj.attr('data-subgrid') || false;\n\t\tvar addRecord = obj.attr('data-add') || false;\n\t\tvar editRecord = obj.attr('data-edit') || false;\n\t\tvar deleteRecord = obj.attr('data-delete') || false;\n\t\tvar refreshRecord = obj.attr('data-refresh') || false;\n\t\tvar viewRecord = obj.attr('data-view') || false;\n\t\tvar searchRecord = obj.attr('data-search') || false;\n\t\tvar multiselect = obj.attr('data-multi-select') || obj.attr('data-multiselect') || obj.attr('data-multiSelect') || false;\n\t\tvar inlineActions = obj.attr('inline-actions') || obj.attr('data-inline-actions') || false;\n\t\tvar autoInlineEdit = obj.attr('data-auto-inline-edit') || false;\n\t\tvar disableInlineDelete = obj.attr('disable-inline-delete') || false;\n\t\tvar disableInlineEdit = obj.attr('disable-inline-edit') || false;\n\t\tvar hideFilters = obj.attr('data-hide-filters') || false;\n\n\t\tif (inlineActions) {\n\t\t\tcolModel.push({\n\t\t\t\tlabel: ' ',\n\t\t\t\tformatter: 'actions',\n\t\t\t\twidth: '50px',\n\t\t\t\tformatoptions: {\n\t\t\t\t\tdelbutton: !disableInlineDelete,\n\t\t\t\t\teditbutton: !disableInlineEdit\n\t\t\t\t},\n\t\t\t\teditable: false,\n\t\t\t\tsearch: false,\n\t\t\t\talign: 'center'\n\t\t\t});\n\t\t}\n\n\t\t// definizione colmodel (json_encode in un array di oggetti)\n\t\t$.each(columns, function(index, obj){\n\t\t\tobj.name = index;\n\n\t\t\t// conversione datepicker\n\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datepicker') != -1){\n\t\t\t\tgrid.elementDatepicker.push(index);\n\t\t\t}\n\n\t\t\t// conversione datetimepicker\n\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datetimepicker') != -1){\n\t\t\t\tgrid.elementDatetimepicker.push(index);\n\t\t\t}\n\n\t\t\t// conversione autocomplete\n\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('autocomplete') != -1){\n\t\t\t\tgrid.elementAutocomplete.push(index);\n\t\t\t}\n\n\t\t\tcolModel.push(obj);\n\t\t});\n\n\t\tvar subGridStatus = subGrid != false;\n\n\t\t// gestione grouping\n\t\tvar groupingStatus = grouping != false;\n\t\tvar groupField = [];\n\t\tvar groupColumnShow = [];\n\t\tvar groupCollapse = false;\n\n\t\tif(groupingStatus){\n\t\t\tgroupCollapse = true;\t// TODO gestire\n\n\t\t\t$.each(grouping.split('|'), function(index, obj){\n\t\t\t\tgroupField.push(obj);\n\t\t\t\tgroupColumnShow.push(false);\n\t\t\t});\n\t\t}\n\n\t\tgrid.resizeArray.push(grid.gridSelector);\n\n\t\tvar curGridSelector = grid.gridSelector;\n\t\tvar curGridLastSelectedRow = grid.lastSelectedRow;\n\n\t\tobj.jqGrid({\n\t\t\turl:\t\t\t\turl + '?data=1&grid_id=' + grid_id + forceParams,\n\t\t\tediturl:\t\t\turl + '/operation/' + grid_id + '?' + forceParams,\n\t\t\tmtype:\t\t\t\t'GET',\n\t\t\tdatatype: \t\t\t'json',\n\t\t\tcolModel:\t\t\tcolModel,\n\t\t\tviewrecords:\t\ttrue,\n\t\t\tadd:\t\t\t\taddRecord,\n\t\t\theight:             'auto',\n\t\t\trowNum:             rowNum,\n\t\t\tpager:              pager,\n\t\t\tautowidth:          true,\n\t\t\tshrinkToFit: \t\ttrue,\n\t\t\tgrouping:           groupingStatus,\n\t\t\tgroupingView: {\n\t\t\t\tgroupCollapse:  groupCollapse,\n\t\t\t\tgroupField:     groupField,\n\t\t\t\tgroupColumnShow:groupColumnShow\n\t\t\t},\n\t\t\tmultiselect:        multiselect,\n\t\t\tsubGrid:            subGridStatus,\n\t\t\tsubGridOptions:\t\t{\n\t\t\t\tplusicon: 'fa fa-plus',\n\t\t\t\tminusicon: 'fa fa-minus'\n\t\t\t},\n\t\t\tonSelectRow: function(id){\n\t\t\t\tvar saveCurrentRow = function(callback, restore) {\n\t\t\t\t\tvar bRestore = restore || false;\n\n\t\t\t\t\t$(curGridSelector).saveRow(curGridLastSelectedRow, function(data){\n\n\t\t\t\t\t\tif (bRestore) {\n\t\t\t\t\t\t\t//$(curGridSelector).restoreRow(curGridLastSelectedRow);\n\t\t\t\t\t\t\t$(curGridSelector).triggerHandler(\"jqGridAfterGridComplete\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcallback();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tif (autoInlineEdit == false)\n\t\t\t\t\treturn;\n\n\t\t\t\tif(id && id !== curGridLastSelectedRow) {\n\t\t\t\t\tif (curGridLastSelectedRow != null) {\n\t\t\t\t\t\tsaveCurrentRow(function(){\n\t\t\t\t\t\t\t// on success\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t$(curGridSelector).editRow(id, true, function(){}, function(){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tcurGridLastSelectedRow = id;\n\t\t\t\t\tgrid.lastSelectedRow = id;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubGridRowExpanded: function(subgrid_id, row_id) {\n\t\t\t\t$('#' + subgrid_id).html(\"<i id='commandSpinner' class='ace-icon fa fa-spinner fa-spin black bigger-125'></i>\");\n\t\t\t\t$('#' + subgrid_id).load(obj.attr(\"data-subgrid\") + \"&row_id=\" + row_id);\n\t\t\t},\n\t\t\tloadComplete: function(data){\n\t\t\t\tif(groupingStatus){\n\t\t\t\t\tgrid.bindClickRowGrouped(grid.gridSelector);\n\t\t\t\t}\n\n\t\t\t\tobj.find(\".ui-inline-edit\").bind(\"click\", function(){\n\n\t\t\t\t\tvar riga = $(this).closest(\"tr\");\n\n\t\t\t\t\t$.each(columns, function(index, obj){\n\n\t\t\t\t\t\t// conversione datepicker\n\t\t\t\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datepicker') != -1){\n\t\t\t\t\t\t\t//riga.find(\"[name='\" + obj.name + \"']\").datepicker({format:'dd/mm/yyyy', autoclose: true}); //, language: \"it\"});\n\t\t\t\t\t\t\triga.find(\"[name='\" + obj.name + \"']\").datetimepicker(grid.datepickerOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datetimepicker') != -1){\n\t\t\t\t\t\t\triga.find(\"[name='\" + obj.name + \"']\").datetimepicker(grid.datetimepickerOptions);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t// autocompletizer\n\t\t\t\tif(grid.elementAutocomplete.length) {\n\t\t\t\t\t$.each(grid.elementAutocomplete, function (index, nome) {\n\t\t\t\t\t\tvar cbo = obj.parents(\"[role=grid]\").find(\".ui-search-input [name=\" + nome + \"]\");\n\n\t\t\t\t\t\t// conversione in combobox\n\t\t\t\t\t\tcbo.combobox();\n\t\t\t\t\t\tcbo.bind('change', function () {\n\t\t\t\t\t\t\tobj.triggerToolbar();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tobj.find(\".ui-inline-cancel\").bind(\"click\", function() {\n\t\t\t\t\t$(grid.gridSelector).trigger(\"reloadGrid\");\n\t\t\t\t});\n\n\t\t\t\tobj.find(\".ui-inline-save\").bind(\"click\", function() {\n\t\t\t\t\t$(grid.gridSelector).trigger(\"reloadGrid\");\n\t\t\t\t});\n\n\t\t\t\tvar functionName = obj.attr('data-oncomplete');\n\t\t\t\tif (typeof functionName == 'undefined')\n\t\t\t\t\treturn;\n\n\t\t\t\tif (typeof window[functionName] == 'function') {\n\t\t\t\t\twindow[functionName](obj, data);\n\t\t\t\t} else {\n\t\t\t\t\tvar error=false;\n\t\t\t\t\tif(functionName.indexOf('.')!=-1){\n\t\t\t\t\t\tobjArray = functionName.split('.');\n\t\t\t\t\t\tif(typeof window[objArray[0]] == 'object' && typeof window[objArray[0]][objArray[1]] == 'function'){\n\t\t\t\t\t\t\twindow[objArray[0]][objArray[1]](obj, data);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\terror = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\terror = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(error){\n\t\t\t\t\t\tconsole.error('Invalid handler: ' + functioName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$('.ui-search-clear').detach();\n\n\t\tif (!hideFilters)\n\t\t\tobj.jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false, defaultSearch: 'cn' });\n\n\t\tobj.navGrid(pager,\n\t\t\t{\n\t\t\t\tedit: editRecord,\n\t\t\t\tadd: addRecord,\n\t\t\t\tdel: deleteRecord,\n\t\t\t\trefresh: refreshRecord,\n\t\t\t\tview: viewRecord,\n\t\t\t\tsearch: searchRecord,\n\t\t\t\tediticon : 'ace-icon fa fa-pencil blue',\n\t\t\t\taddicon : 'ace-icon fa fa-plus-circle purple',\n\t\t\t\tdelicon : 'ace-icon fa fa-trash-o red',\n\t\t\t\tsearchicon : 'ace-icon fa fa-search orange',\n\t\t\t\trefreshicon : 'ace-icon fa fa-refresh green',\n\t\t\t\tviewicon : 'ace-icon fa fa-search-plus grey'\n\t\t\t},\n\t\t\t{\n\t\t\t\tcloseAfterEdit: true,\n\t\t\t\tafterShowForm: function(form) {\n\t\t\t\t\tgrid.callbackLoadFormEditComplete();\n\t\t\t\t},\n\t\t\t\tafterSubmit: function(response, postData) {\n\t\t\t\t\tif (!response.responseJSON.response) {\n\t\t\t\t\t\treturn [false, response.responseJSON.message];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [true, response.responseJSON.message];\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t'url': url + '/operation/' + grid_id,\n\t\t\t\tcloseAfterAdd: true,\n\t\t\t\tafterShowForm: function(form) {\n\t\t\t\t\tgrid.callbackLoadFormEditComplete();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t'url': url + '/operation/' + grid_id,\n\t\t\t\tbeforeShowForm: function(form) { }\n\t\t\t},\n\t\t\t{\n\t\t\t\tafterShowSearch: function(form) { }\n\t\t\t}\n\t\t);\n\t},\n\tbindClickRowGrouped: function(obj){\n\t\t$(obj).bind('click',(function (e) {\n\t\t\tvar $target = $(e.target),\n\t\t\t\t$groupHeader = $target.closest(\"tr.jqgroup\");\n\t\t\tif ($groupHeader.length > 0) {\n\t\t\t\tif (e.target.nodeName.toLowerCase() !== \"span\" ||\n\t\t\t\t\t(!$target.hasClass(plusIcon) && !$target.hasClass(minusIcon))) {\n\n\t\t\t\t\t$(this).jqGrid(\"groupingToggle\", $groupHeader.attr(\"id\"));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t},\n\tresizeManager: function() {\n\t\t$.each(grid.resizeArray, function(index, item){\n\t\t\tif ($('.page-container').length > 0)\n\t\t\t\t$(item).setGridWidth($('.page-container').width());\n\t\t\telse if ($('.page-content').length > 0) {\n\t\t\t\t$(item).setGridWidth($('.page-content').width());\n\t\t\t}\n\t\t\telse\n\t\t\t\t$(item).setGridWidth($('window').width());\n\t\t});\n\t},\n\tgetSelectedItems: function(gridId){\n\t\treturn $(\"#\" + gridId).getGridParam('selarrrow');\n\t},\n\tcallbackLoadFormEditComplete: function(){\n\n\t\t$.each(grid.elementDatepicker, function(index,nome){\n\t\t\t//$(\"#\" + nome).datepicker({format:'dd/mm/yyyy', autoclose: true}); //, language: \"it\"});\n\t\t\t$(\"#\" + nome).datetimepicker(grid.datepickerOptions);\n\t\t});\n\n\t\t$.each(grid.elementDatetimepicker, function(index,nome){\n\t\t\t$(\"#\" + nome).datetimepicker(grid.datetimepickerOptions);\n\t\t});\n\n\t\t$.each(grid.elementAutocomplete, function (index, nome) {\n\n\t\t\t$(\"#\" + nome).chosen({allow_single_deselect:true});\n\n\t\t\t$(window)\n\t\t\t\t.off('resize.chosen')\n\t\t\t\t.on('resize.chosen', function() {\n\t\t\t\t\t$(\"#\" + nome).each(function() {\n\t\t\t\t\t\tvar $this = $(this);\n\t\t\t\t\t\t$this.next().css({'width': $this.parent().width()});\n\t\t\t\t\t})\n\t\t\t\t}).trigger('resize.chosen');\n\n\t\t\t//resize chosen on sidebar collapse/expand\n\t\t\t$(document).on('settings.ace.chosen', function(e, event_name, event_val) {\n\t\t\t\tif(event_name != 'sidebar_collapsed') return;\n\t\t\t\t$(\"#\" + nome).each(function() {\n\t\t\t\t\tvar $this = $(this);\n\t\t\t\t\t$this.next().css({'width': $this.parent().width()});\n\t\t\t\t})\n\t\t\t});\n\n\t\t});\n\n\t},\n\tgridSelector: \"\",\n\tresizeArray: [],\n\telementDatepicker: [],\n\telementDatetimepicker: [],\n\telementAutocomplete: [],\n\tdatetimepickerOptions: {\n\t\tmask: true,\n\t\tformat: \"d/m/Y H:i:s\",\n\t\tstep: 30,\n\t\tcloseOnTimeSelect: true,\n\t\tscrollInput:false\n\t},\n\tdatepickerOptions: {\n\t\tmask: true,\n\t\tformat: \"d/m/Y\",\n\t\tcloseOnDateSelect: true,\n\t\ttimepicker: false\n\t},\n\tlastSelectedRow: null\n};\n\n$(window).bind('resize', function() { grid.resizeManager(); }).trigger('resize');","var popup = function(gridId) {\n\t\n\tvar popup = this;\n\n\tthis.bindEvents = function() {\n\t\t$('[data-interaction=update]').unbind('click').bind('click', function () {\n\t\t\tapp.block(1);\n\t\t\tapp.formSubmit(\"popup\", $(\"[data-interaction=frmPopup]\"), {}, function (data) {\n\t\t\t\tif (data.response) {\n\t\t\t\t\tapp.href('#popup/' + data.message);\n\t\t\t\t} else {\n\t\t\t\t\tapp.error(data.message);\n\t\t\t\t}\n\t\t\t\tapp.block(0);\n\t\t\t}, function(){\n\t\t\t\tapp.block(0);\n\t\t\t});\n\t\t});\n\n\t\t$('[data-interaction=\"delete\"]').unbind('click').bind('click', function () {\n\t\t\tvar id = $(this).attr(\"data-id\");\n\t\t\t$.delete(\"popup/\"+id, function(data){\n\t\t\t\tif (data.response) {\n\t\t\t\t\tapp.href(\"#popup\");\n\t\t\t\t} else {\n\t\t\t\t\tapp.error(data.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('[data-interaction=edit]').unbind('click').bind('click', function() {\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\tvar id = $(\"#\" + gridId).jqGrid('getGridParam', 'selrow') || 0;\n\n\t\t\tif(!id) {\n\t\t\t\tapp.warning(\"Devi selezionare una riga\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tapp.href(url + \"/\" + id);\n\t\t});\n\t};\n\t\n\tthis.bindEvents();\n\t\n};","var weconsPopupper = {\n    /**\n     * Aggiunge N scripts alla pagina\n     *  es: getMultiScripts(aScripts).done(function(){...});\n     * @param arr\n     * @param path\n     * @returns {*}\n     */\n    getMultiScripts: function (arr, path) {\n        var _arr = jQuery.map(arr, function (scr) {\n            return jQuery.getScript((path || \"\") + scr);\n        });\n\n        _arr.push(jQuery.Deferred(function (deferred) {\n            jQuery(deferred.resolve);\n        }));\n\n        return jQuery.when.apply(jQuery, _arr);\n    },\n\n    popupWeconsClick: function(obj) {\n        // chiusura popup\n        jQuery.unblockUI();\n\n        // invio richiesta google analytics per click\n        if (typeof ga != 'undefined')\n            ga('send', 'event', 'bannerPopupClick', jQuery(obj).attr('title'), jQuery(obj).attr('href'));\n        else\n            console.log(['bannerPopupClick', jQuery(obj).attr('title'), jQuery(obj).attr('href')]);\n\n    },\n\n    runPopupWecons: function(testForceOpen) {\n\n        testForceOpen = testForceOpen || 0;\n\n        // verifico di non aver già recuperato il popup nella sessione corrente\n        if (!Cookies.get('popupWeconsAlreadyOpened')) {\n            jQuery.get(weconsPopupper.sourceUrl + 'popup/last')\n                .success(function (data) {\n\n                    if (data) {\n\n                        console.log(testForceOpen);\n\n                        if ((data.id && data.id > 0) || testForceOpen) {\n\n                            Cookies.set('popupWeconsAlreadyOpened', '1');\n\n                            var target = data.blank ? '_blank' : '';\n                            var $div = jQuery('<div><a title=\"' + data.title + '\" onclick=\"weconsPopupper.popupWeconsClick(this);\" id=\"popupWecons\" href=\"' + data.url + '\" target=\"' + target + '\"><img src=\"' + weconsPopupper.sourceUrl + data.image + '\" alt=\"' + data.title + '\" style=\"width: 100%;\"></a><button onclick=\"jQuery.unblockUI();\">chiudi</button></div>');\n                            jQuery.blockUI({message: $div.html()});\n                            $(\"#popupWecons\").parent().css('background-color', 'transparent');\n                            $(\"#popupWecons\").parent().css('border', 'none');\n                            $(\"#popupWecons\").parent().css('left', '25%');\n                            $(\"#popupWecons\").parent().css('width', '50%');\n                            $(\"#popupWecons\").parent().css('top', '20%');\n\n                            // invio richiesta google analytics per caricamento popup\n                            if (typeof ga != 'undefined')\n                                ga('send', 'event', 'bannerPopupView', data.title, data.url);\n                            else\n                                console.log(['bannerPopupView', data.title, data.url]);\n\n                        } else {\n                            console.log(\"Nessun popup attivo\");\n                        }\n                    }\n                })\n                .error(function () {\n                    console.error(\"Popup error\");\n                });\n        }else{\n            console.log(\"Popup already showed in session\");\n        }\n\n    },\n\n    run: function(sourceUrl){\n\n        weconsPopupper.sourceUrl = sourceUrl;\n\n        var aScripts = [];\n        if (typeof jQuery.blockUI == 'undefined') {\n            aScripts.push(\"http://weconstudio.it/wecookielaw/jquery.blockUI.js\");\n        }\n        if (typeof Cookies == 'undefined') {\n            aScripts.push(\"http://weconstudio.it/wecookielaw/js.cookie.js\");\n        }\n        if (aScripts.length > 0) {\n            weconsPopupper.getMultiScripts(aScripts).done(function () {\n                weconsPopupper.runPopupWecons()\n            });\n        } else {\n            weconsPopupper.runPopupWecons();\n        }\n    },\n\n\n    // url base da impostare tramite sito 'client'\n    sourceUrl: \"\" // NB deve terminare con '/'\n};\n\n","var register = function() {\n\t\n\tthis.bindEvents = function() {\n\t\t$('#country').unbind('change').bind('change', function() {\n\t\t\tvar currency = $(this).find('option:selected').attr('data-currency');\n\t\t\t$('#currency').val(currency);\n\t\t});\n\n\t\t$('#country').trigger(\"change\");\n\t};\n\t\n\tthis.bindEvents();\n};\n","var user = function(ajaxUrl) {\n\n\tthis.bindEvents = function(dataTable) {\n\t\t$('[data-interaction=enable]').unbind('click').bind('click', function() {\n\t\t\tvar id = $(this).closest('tr').attr('data-id');\n\t\t\tvar disable = $(this).attr('data-disable');\n\t\t\tvar url = ajaxUrl + \"/enable/\" + id + (disable ? \"?enable=0\" : \"?enable=1\");\n\n\t\t\tapp.block(1);\n\t\t\t$.post(url)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tif(data.response) {\n\t\t\t\t\t\tapp.success('User ' + (disable ? 'disabled' : 'enabled'));\n\t\t\t\t\t\tdataTable.table.draw('page');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.warning('', data.message);\n\t\t\t\t\t}\n\t\t\t\t\tapp.block(0);\n\t\t\t\t})\n\t\t\t\t.error(function() {\n\t\t\t\t\tapp.block(0);\n\t\t\t\t\tapp.error('', 'Unable to enable User!');\n\t\t\t\t});\n\t\t});\n\t};\n\n\tthis.bindEvents();\n\n};\n"],"sourceRoot":"/source/"}