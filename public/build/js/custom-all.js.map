{"version":3,"sources":["app.js","errorHandler.js","grid.js","popup.js","popup_client.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC92BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"custom-all.js","sourcesContent":["var app = {\n\tbaseUrl: undefined,\n\tdefault_url: undefined,\n\terrorPage: undefined,\n\tinit: function(default_url) {\n\t\terrorHandler.init();\n\n\t\tapp.default_url = default_url || 'dashboard';\n\n\t\tif(app.baseUrl) {\n\t\t\tapp.default_url_error = app.baseUrl + \"/error\";\n\t\t\t$.get(app.default_url_error)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tapp.errorPage = data;\n\t\t\t\t});\n\t\t}\n\n\t\tapp.runBind();\n\n\t\tapp.initKeepalive();\n\n\n\n\t\t// Laravel CSRF protection\n\t\t$.ajaxSetup({\n\t\t\theaders: {\n\t\t\t\t'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t}\n\t\t});\n\n\t\t// ACE Ajax manager\n\t\t$('#page-content-section').\n\t\t\tace_ajax({\n\t\t\t\tcontent_url: function(hash) {\n\n\t\t\t\t\t//debugger\n\n\t\t\t\t\t//hash is the value from document url hash\n\t\t\t\t\t//take \"url\" param and return the relevant url to load\n\t\t\t\t\treturn hash;\n\t\t\t\t},\n\t\t\t\tdefault_url: app.default_url,\n\t\t\t\tloading_icon: \"fa fa-cog fa-2x blue fa-spin\"\n\t\t\t})\n\t\t\t.on('ajaxloadcomplete', function(e, params) {\n\t\t\t\tapp.runBind();\n\t\t\t})\n\t\t\t.on('ajaxloaderror', function() {\n\t\t\t\t// recupero una pagina di errore e la mostra\n\t\t\t\t$(\"#page-content-section\").html(app.errorPage);\n\t\t\t});\n\n\t},\n\n\tinitKeepalive: function () {\n\t\t// window.setInterval(function () {\n\t\t// \t$.post(\"?p=server&a=keepalive\", function (data) {\n\t\t// \t\tif (!data.response)\n\t\t// \t\t\tapp.reload();\n\t\t// \t});\n\t\t// }, 3 * 60 * 1000);\n\t},\n\n\t/**\n\t * Aggiunge N scripts alla pagina\n\t *  es: getMultiScripts(aScripts).done(function(){...});\n\t * @param arr\n\t * @param path\n\t * @returns {*}\n\t */\n\tgetMultiScripts: function(arr, path) {\n\t\tvar _arr = jQuery.map(arr, function(scr) {\n\t\t\treturn jQuery.getScript( (path||\"\") + scr );\n\t\t});\n\t\n\t\t_arr.push(jQuery.Deferred(function( deferred ){\n\t\t\tjQuery( deferred.resolve );\n\t\t}));\n\t\n\t\treturn jQuery.when.apply(jQuery, _arr);\n\t},\n\t\n\t/**\n\t *\n\t * @param nome\n\t * @param cognome\n\t * @param comune\n\t * @param provincia\n\t * @param dataNascita\n\t * @param sesso: M|F\n\t * @param callback\n\t */\n\tcalcoloCodiceFiscale: function (nome, cognome, comune, provincia, dataNascita, sesso, stato, callback) {\n\n\t\tif (nome == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'nome'\");\n\t\t\treturn;\n\t\t}\n\t\tif (cognome == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'cognome'\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (comune == \"\" && provincia != \"ES\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'comune'\");\n\t\t\treturn;\n\t\t}\n\t\tif (provincia == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'provincia'\");\n\t\t\treturn;\n\t\t}\n\t\tif (dataNascita == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'dataNascita'\");\n\t\t\treturn;\n\t\t}\n\t\tif (sesso == \"\") {\n\t\t\tapp.warning(\"\", \"Campo vuoto 'sesso'\");\n\t\t\treturn;\n\t\t}\n\n\t\tstato = stato || \"\";\n\n\t\t$.post(\"?p=server&a=calcolaCodiceFiscale\", {\n\t\t\tnome: nome,\n\t\t\tcognome: cognome,\n\t\t\tdata: dataNascita,\n\t\t\tcomune: comune,\n\t\t\tprovincia: provincia,\n\t\t\tsesso: sesso,\n\t\t\tstato: stato\n\t\t}, function (data) {\n\t\t\tif (data.response) {\n\t\t\t\tif (typeof callback == 'function') {\n\t\t\t\t\tcallback(data.message);\n\t\t\t\t} else {\n\t\t\t\t\tapp.warning(\"\", \"Callback mancante\");\n\t\t\t\t\tconsole.log(data.message);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}).error(function () {\n\t\t\tapp.error('Errore durante la chiamata calcolaCodiceFiscale');\n\t\t});\n\t},\n\n\tinitAutocomplete: function () {\n\n\t\t$('[data-autocomplete]').each(function () {\n\t\t\tvar tipo = $(this).attr('data-autocomplete');\n\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\turl = url || \"geoname\";\n\n\t\t\tif($.trim($(this).html()) === \"\") { // così posso partire con una option già selezionata\n\t\t\t\t$(this).html(\"<option></option>\");\n\t\t\t}\n\n\t\t\t$(this).ajaxChosen({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: app.baseUrl + \"/\" + url + \"/\" + tipo,\n\t\t\t\tdataType: 'json'\n\t\t\t}, function (data) {\n\t\t\t\tvar results = [];\n\n\t\t\t\t$.each(data, function (i, val) {\n\t\t\t\t\tresults.push({ value: val.value, text: val.text });\n\t\t\t\t});\n\n\t\t\t\treturn results;\n\t\t\t}, {allow_single_deselect: true});\n\t\t});\n\n\t\t$('[data-autocompleteui]').each(function () {\n\n\t\t\tvar tipo = $(this).attr('data-autocomplete');\n\n\t\t\tvar itemOptional = $(this).attr('data-itemopzionale');\n\t\t\titemOptional = itemOptional || 0;\n\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\turl = url || \"geoname\";\n\t\t\t\n\t\t\tvar callback = $(this).attr('data-callback');\n\n\t\t\tfunction getTextValueFromResponseAutocomplete(obj) {\n\n\t\t\t\tif (typeof obj.txt != 'undefined')\n\t\t\t\t\treturn obj.txt;\n\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\t$(this).autocomplete({\n\t\t\t\tsource: function (request, response) {\n\t\t\t\t\t$.getJSON(url + \"/\" + tipo + \"/\" + request.term, function (data) {\n\t\t\t\t\t\tresponse($.map(data.message, function (value, key) {\n\n\t\t\t\t\t\t\tvar textValue = \"\";\n\t\t\t\t\t\t\tif (typeof value == 'string') {\n\t\t\t\t\t\t\t\ttextValue = value;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (typeof value == 'object') {\n\t\t\t\t\t\t\t\t\ttextValue = getTextValueFromResponseAutocomplete(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: textValue,\n\t\t\t\t\t\t\t\tobj: value,\n\t\t\t\t\t\t\t\tvalue: key\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tminLength: 0,\n\t\t\t\tselect: function (event, ui) {\n\t\t\t\t\tvar textValue = \"\";\n\n\t\t\t\t\tif (typeof ui.item.obj == 'object') {\n\t\t\t\t\t\ttextValue = getTextValueFromResponseAutocomplete(ui.item.obj);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttextValue = ui.item.label;\n\t\t\t\t\t}\n\n\t\t\t\t\t$(this).val(textValue);\n\n\t\t\t\t\t$(this).attr('data-id', ui.item.value);\n\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tfunctionCallBack = eval(callback);\n\t\t\t\t\t\tif (typeof functionCallBack == 'function') {\n\t\t\t\t\t\t\tfunctionCallBack($(this), tipo, ui.item);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"Callback non trovata: \" + callback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tchange: function (event, ui) {\n\t\t\t\t\tif (ui.item) {\n\t\t\t\t\t\t// valido\n\t\t\t\t\t\t$(this).val(ui.item.label);\n\t\t\t\t\t\t$(this).attr('data-id', ui.item.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!itemOptional) {\n\t\t\t\t\t\t\t$(this).attr('data-id', 0);\n\t\t\t\t\t\t\t$(this).val('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t},\n\n\trunBind: function () {\n\t\t// inizializzazione timepicker in italiano\n\n\t\tif (jQuery.datetimepicker) {\n\t\t\tjQuery.datetimepicker.setLocale('it');\n\t\t}\n\n\t\t// TODO: mettere nel bower.json inputmask\n\t\t// $(\".euro\").inputmask('decimal', {digits: 2});\n\n\t\t/* inizializzazione editor descrizione */\n\t\t$('.wysiwyg-editor').each(function () {\n\t\t\tvar editor = $(this).ace_wysiwyg({\n\t\t\t\ttoolbar: [\n\t\t\t\t\t'font',\n\t\t\t\t\tnull,\n\t\t\t\t\t'fontSize',\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'bold', className: 'btn-info'},\n\t\t\t\t\t{name: 'italic', className: 'btn-info'},\n\t\t\t\t\t{name: 'strikethrough', className: 'btn-info'},\n\t\t\t\t\t{name: 'underline', className: 'btn-info'},\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'insertunorderedlist', className: 'btn-success'},\n\t\t\t\t\t{name: 'insertorderedlist', className: 'btn-success'},\n\t\t\t\t\t{name: 'outdent', className: 'btn-purple'},\n\t\t\t\t\t{name: 'indent', className: 'btn-purple'},\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'justifyleft', className: 'btn-primary'},\n\t\t\t\t\t{name: 'justifycenter', className: 'btn-primary'},\n\t\t\t\t\t{name: 'justifyright', className: 'btn-primary'},\n\t\t\t\t\t{name: 'justifyfull', className: 'btn-inverse'},\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'createLink', className: 'btn-pink'},\n\t\t\t\t\t{name: 'unlink', className: 'btn-pink'},\n\t\t\t\t\tnull,\n\t\t\t\t\tnull,\n\t\t\t\t\tnull,\n\t\t\t\t\t'foreColor',\n\t\t\t\t\tnull,\n\t\t\t\t\t{name: 'undo', className: 'btn-grey'},\n\t\t\t\t\t{name: 'redo', className: 'btn-grey'}\n\t\t\t\t],\n\t\t\t\t'wysiwyg': {\n\t\t\t\t\t/* fileUploadError: showErrorAlert */\n\t\t\t\t}\n\t\t\t}).prev().addClass('wysiwyg-style2');\n\n\t\t\tif ($(this).hasClass(\"wysiwyg-editor-disabled\"))\n\t\t\t\t$(this).attr(\"contenteditable\", \"false\");\n\t\t});\n\n\t\t$(\".datepicker\").datetimepicker({\n\t\t\tdayOfWeekStart: 1,\n\t\t\t// mask: true,\n\t\t\tformat: \"d/m/Y\",\n\t\t\tcloseOnDateSelect: true,\n\t\t\ttimepicker: false,\n\t\t\tscrollInput: false\n\t\t}); //TODO impostare lingua e mettere data di default\n\n\t\tvar date = new Date(2016, 01, 01, 06, 45, 00), interval = 15, arrTime = [];\n\t\tfor (var i = 0; i < (12 * 4); i++) {\n\t\t\tdate.setMinutes(date.getMinutes() + interval);\n\t\t\tarrTime.push(date.getHours() + '.' + date.getMinutes());\n\t\t}\n\n\t\t$(\".datetimepicker\").datetimepicker({\n\t\t\tdayOfWeekStart: 1,\n\t\t\t// mask: true,\n\t\t\tformat: \"d/m/Y H:i\",\n\t\t\tstep: 30,\n\t\t\tcloseOnTimeSelect: true,\n\t\t\tscrollInput: false,\n\t\t\tallowTimes: arrTime\n\t\t});\n\n\t\t$(\"[data-interaction=dropzone]\").each(function () {\n\t\t\tvar url = $(this).attr(\"data-url\");\n\t\t\tvar parameters = $(this).attr(\"data-parameters\") || \"\";\n\t\t\tvar callback = $(this).attr(\"data-callback\") || null;\n\n\t\t\tif(!$(this).attr('dropzoned')) {\n\t\t\t\t$(this).attr('dropzoned', 'true');\n\n\t\t\t\t$(this).dropzone(\n\t\t\t\t\t{\n\t\t\t\t\t\turl: url + parameters,\n\t\t\t\t\t\theaders: $.ajaxSetup().headers,\n\t\t\t\t\t\tpreviewTemplate : '<div style=\"display:none\"></div>',\n\t\t\t\t\t\tsuccess: function (file, data) {\n\t\t\t\t\t\t\tapp.blockUI(0);\n\t\t\t\t\t\t\t$('.dz-preview').detach();\n\n\t\t\t\t\t\t\tif(callback) {\n\t\t\t\t\t\t\t\tfunctionCallBack = eval(callback);\n\t\t\t\t\t\t\t\tif (typeof functionCallBack == 'function') {\n\t\t\t\t\t\t\t\t\tfunctionCallBack($(this), data);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Callback non trovata: \" + callback);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function () {\n\t\t\t\t\t\t\tapp.blockUI(0);\n\t\t\t\t\t\t\tapp.error(\"Errore in fase di caricamento\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tapp.initAutocomplete();\n\n\t},\n\n\tlocationHref: function (url, withBlank) {\n\n\t\twithBlank = withBlank || 0;\n\n\t\t//if (noBlockUI == 0)\n\t\t//\tapp.blockUI(true);\n\n\t\turl = url.replace(\"#\", \"\");\n\t\tif(url.indexOf(app.baseUrl) < 0) {\n\t\t\tif(url[0] == \"/\") url = url.substring(1, url.length);\n\t\t\turl = app.baseUrl + \"/\" + url;\n\t\t}\n\n\t\tif (withBlank == 1) {\n\t\t\twindow.open(\n\t\t\t\turl,\n\t\t\t\t'_blank'\n\t\t\t);\n\t\t\t//app.blockUI(false);\n\t\t}\n\t\telse {\n\t\t\t// se non è stato aggiunto base_url lo aggiungo in automatico\n\t\t\tif(document.URL.replace(\"#\", \"\") == url) {\n\t\t\t\tapp.reload();\n\t\t\t} else {\n\t\t\t\twindow.location.href = url;\n\t\t\t}\n\t\t}\n\n\t},\n\n\thref: function (url) {\n\t\tapp.locationHref(url);\n\t},\n\n\tblock: function (blk) {\n\t\tif (blk) {\n\t\t\t// BlockUI\n\t\t\t$.blockUI({\n\t\t\t\tmessage: 'CARICAMENTO IN CORSO...',\n\t\t\t\tcss: {\n\t\t\t\t\tborder: 'none',\n\t\t\t\t\tpadding: '15px',\n\t\t\t\t\tbackgroundColor: '#000',\n\t\t\t\t\t'border-radius': '10px',\n\t\t\t\t\topacity: .8,\n\t\t\t\t\tcolor: '#fff'\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$.unblockUI();\n\t\t}\n\t},\n\n\tlocation: function (location) {\n\t\tapp.block(1);\n\t\twindow.location.href = location;\n\t},\n\n\treload: function () {\n\t\tapp.blockUI(true);\n\n\t\t// AJAX\n\t\t$('#page-content-section').ace_ajax(\"reload\");\n\n\t\tapp.blockUI(false);\n\t},\n\n\tsetLoading: function (active) {\n\n\t},\n\n\t/**\n\t * Mostra un confirm\n\t */\n\trequestConfirm: function (title, message) {\n\n\t\tvar passVerificata = false;\n\n\t\tif (confirm(message)) {\n\n\t\t\tvar password = prompt(\"Inserire la password di conferma\");\n\n\t\t\tif ($.trim(password) != \"\") {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: \"?p=server&a=checkPassword\",\n\t\t\t\t\tasync: false,\n\t\t\t\t\tdata: \"password=\" + password,\n\t\t\t\t\tsuccess: function (data) {\n\n\t\t\t\t\t\tif (data.response) {\n\t\t\t\t\t\t\tpassVerificata = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.error(data.message);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn passVerificata;\n\t},\n\n\t/**\n\t * Mostra un GRITTER messaggio di warning\n\t */\n\twarning: function (title, message) {\n\t\t$.gritter.add({\n\t\t\ttitle: title,\n\t\t\ttext: message,\n\t\t\tclass_name: 'gritter-warning'\n\t\t});\n\t},\n\n\t/**\n\t * Mostra un GRITTER messaggio di error\n\t */\n\terror: function (title, message) {\n\t\t$.gritter.add({\n\t\t\ttitle: title,\n\t\t\ttext: message,\n\t\t\tclass_name: 'gritter-error',\n\t\t});\n\t},\n\n\t/**\n\t * Mostra un GRITTER messaggio di successo\n\t */\n\tsuccess: function (title, message) {\n\t\t$.gritter.add({\n\t\t\t// (string | mandatory) the heading of the notification\n\t\t\ttitle: title,\n\t\t\t// (string | mandatory) the text inside the notification\n\t\t\ttext: message,\n\t\t\tclass_name: 'gritter-success'\n\t\t});\n\t},\n\n\tblockUI: function (blk, message) {\n\t\tif (app.dontBlock)\n\t\t\treturn;\n\n\t\tif (blk) {\n\t\t\t// BlockUI\n\t\t\t$.blockUI({\n\t\t\t\tmessage: message || \"Caricamento in corso\",\n\t\t\t\tcss: {\n\t\t\t\t\tborder: 'none',\n\t\t\t\t\tpadding: '15px',\n\t\t\t\t\tbackgroundColor: '#000',\n\t\t\t\t\t'border-radius': '10px',\n\t\t\t\t\topacity: .8,\n\t\t\t\t\tcolor: '#fff'\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$.unblockUI();\n\t\t}\n\t},\n\tdontBlock: false,\n\n\tautocomplizer: function (objSelect, idNewObject, funcSelect, funcNothingSelected, funcBeginWithSelected, myClass) {\n\n\t\tvar hasOptionSelected = objSelect.find('option:selected').length;\n\t\tif (hasOptionSelected != 0) {\n\t\t\tvar selectedText = objSelect.find('option:selected').text();\n\t\t\tvar selectedValue = objSelect.find('option:selected').val();\n\t\t}\n\n\t\tif (!myClass)\n\t\t\tmyClass = objSelect.attr(\"class\");\n\n\t\tvar autoc = $(\"<input type='text' class='\" + myClass + \"' id='\" + idNewObject + \"'>\");\n\t\tvar aVal = [];\n\t\tobjSelect.find('option').each(function (index, obj) {\n\t\t\taVal.push({\n\t\t\t\tid: $(obj).val(),\n\t\t\t\tvalue: $(obj).text()\n\t\t\t});\n\t\t})\n\n\t\tobjSelect.replaceWith(autoc);\n\n\t\tvar hidden_original = $(\"<input type='hidden' id='\" + objSelect.attr('id') + \"' name='\" + objSelect.attr('name') + \"'>\");\n\t\tautoc.parent().append(hidden_original);\n\n\t\tif (!funcSelect) {\n\t\t\tfuncSelect = function (id, value) {\n\t\t\t\t$(\"#\" + idNewObject).val(value);\n\t\t\t\thidden_original.val(id);\n\t\t\t};\n\t\t}\n\t\tif (!funcNothingSelected) {\n\t\t\tfuncNothingSelected = function () {\n\t\t\t\thidden_original.val(0);\n\t\t\t};\n\t\t}\n\t\tif (!funcBeginWithSelected) {\n\t\t\tfuncBeginWithSelected = function (text, value) {\n\t\t\t\t$(\"#\" + idNewObject).val(text);\n\t\t\t\thidden_original.val(value);\n\t\t\t};\n\t\t}\n\n\t\tif (hasOptionSelected != 0) {\n\t\t\tfuncBeginWithSelected(selectedText, selectedValue);\n\t\t}\n\n\t\t$('#' + idNewObject).autocomplete({\n\t\t\tsource: aVal,\n\t\t\tfocus: function () {\n\t\t\t\t$(this).trigger('keydown.autocomplete');\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tfuncSelect(ui.item.id, ui.item.value);\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tchange: function (event, ui) {\n\t\t\t\tif (ui.item == null)\n\t\t\t\t\tfuncNothingSelected();\n\t\t\t},\n\t\t});\n\t},\n\tsetLanguage: function (shortCode) {\n\t\t$.cookie('app_language', shortCode);\n\t},\n\tscreenshotPreview: function () {\n\n\t\txOffset = 10;\n\t\tyOffset = 30;\n\n\t\t$(\"a.imagePreview\").hover(function (e) {\n\t\t\t\tthis.t = this.title;\n\t\t\t\tthis.title = \"\";\n\t\t\t\tvar c = (this.t != \"\") ? \"<br/>\" + this.t : \"\";\n\t\t\t\t$(\"body\").append(\"<p id='imagePreview'><img src='\" + this.rel + \"' alt='Preview' />\" + c + \"</p>\");\n\t\t\t\t$(\"#imagePreview\")\n\t\t\t\t\t.css(\"top\", (e.pageY - xOffset) + \"px\")\n\t\t\t\t\t.css(\"left\", (e.pageX + yOffset) + \"px\")\n\t\t\t\t\t.fadeIn(\"fast\");\n\t\t\t},\n\t\t\tfunction () {\n\t\t\t\tthis.title = this.t;\n\t\t\t\t$(\"#imagePreview\").remove();\n\t\t\t});\n\t\t$(\"a.imagePreview\").mousemove(function (e) {\n\t\t\t$(\"#imagePreview\")\n\t\t\t\t.css(\"top\", (e.pageY - xOffset) + \"px\")\n\t\t\t\t.css(\"left\", (e.pageX + yOffset) + \"px\");\n\t\t});\n\t},\n\n\tplatform: {\n\t\tdetection: function () {\n\t\t\tif (navigator.platform.indexOf(\"iPad\", 0) >= 0)\n\t\t\t\treturn (\"ios\");\n\t\t\telse if (navigator.platform.indexOf(\"iPhone\", 0) >= 0)\n\t\t\t\treturn (\"ios\");\n\t\t\telse if (navigator.userAgent.indexOf(\"Android\", 0) >= 0)\n\t\t\t\treturn (\"android\");\n\t\t\telse\n\t\t\t\treturn \"desktop\";\n\t\t},\n\t\tdeviceType: function () {\n\t\t\tif (navigator.platform.indexOf(\"iPad\", 0) >= 0)\n\t\t\t\treturn (\"tablet\");\n\t\t\telse if (navigator.platform.indexOf(\"iPhone\", 0) >= 0)\n\t\t\t\treturn (\"phone\");\n\t\t\telse if (navigator.userAgent.indexOf(\"Android\", 0) >= 0) {\n\t\t\t\tif (navigator.userAgent.indexOf(\"Mobile\", 0) >= 0)\n\t\t\t\t\treturn (\"phone\");\n\t\t\t\telse\n\t\t\t\t\treturn (\"tablet\");\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn \"tablet\";\n\t\t},\n\t\tisMobile: function () {\n\t\t\treturn app.platform.detection() != \"desktop\";\n\t\t}\n\t},\n\t\n\tformSubmit: function(url, form, params, success, error) {\n\t\tsuccess = success || function() {};\n\t\terror = error || function() {};\n\t\tform = form || undefined;\n\t\tvar $form = form;\n\t\tif(!form){\n\t\t\tapp.warning(\"form undefined\");\n\t\t\treturn;\n\t\t}\n\n\t\tif(typeof form == 'string')\n\t\t\t$form = $(form);\n\t\telse\n\t\t\t$form = form; //oggetto\n\n\t\tvar $method = null;\n\t\tif($form.attr(\"data-id\") && $form.attr(\"data-id\") > 0){\n\t\t\t$method = $.put;\n\t\t\turl += \"/\" + $form.attr(\"data-id\");\n\t\t}else{\n\t\t\t$method = $.post;\n\t\t}\n\n\t\t$form.find('.error-block').removeClass('show');\n\n\t\tvar aParam = lib.formSerialize($form);\n\t\taParam = $.extend({}, aParam, params);\n\n\t\t$method(url, aParam)\n\t\t\t.success(function(data) {\n\t\t\t\tsuccess(data);\n\t\t\t})\n\t\t\t.error(function(data) {\n\t\t\t\tif(data.status = 422) {\n\t\t\t\t\tvar errors = data.responseJSON;\n\t\t\t\t\tObject.keys(errors).forEach(function(k) {\n\t\t\t\t\t\tvar $error = undefined;\n\t\t\t\t\t\tvar name = k;\n\t\t\t\t\t\tif(k.indexOf(\".\") > -1) {\n\t\t\t\t\t\t\t// l'elemento è un array\n\t\t\t\t\t\t\tname = k.replace(\".\", \"[\") + \"]\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif($form.find('[data-name=\"' + name + '\"]').length > 0) {\n\t\t\t\t\t\t\t$error = $form.find('[data-name=\"' + name + '\"]');\n\t\t\t\t\t\t\t$error.html(errors[k]);\n\t\t\t\t\t\t\t$error.addClass('show');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// lo spazio per mostrare l'errore non c'è. Lo creo\n\t\t\t\t\t\t\tvar $field = $('[name=\"' + name + '\"]');\n\t\t\t\t\t\t\tif($field) {\n\t\t\t\t\t\t\t\tvar $parent = $field.parent();\n\t\t\t\t\t\t\t\t$error = $('<span class=\"error-block show\" data-name=\"' + name + '\">' + errors[k] + '</span>');\n\t\t\t\t\t\t\t\t$parent.append($error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\terror(data);\n\t\t\t});\n\t}\n};\n\n/**\n * Estensione jquery per metodi put e delete ajax\n */\njQuery.each( [ \"put\", \"delete\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\t\t\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\nvar lib = {\n\tdataPrintTrue: \"þ\",\n\tdataPrintFalse: \"¨\",\n\t/**\n\t * Converte un array di parameteri in formato p1=1&p2=2... in un oggetto json\n\t */\n\tconvertGetParamInJSON: function (stringParameters) {\n\t\tvar hash;\n\t\tvar ret = {};\n\t\tvar hashes = stringParameters.split('&');\n\t\tfor (var i = 0; i < hashes.length; i++) {\n\t\t\thash = hashes[i].split('=');\n\t\t\tif (typeof hash[0] != \"undefined\") {\n\t\t\t\tret[hash[0]] = (typeof hash[1] != \"undefined\") ? hash[1] : \"\";\n\t\t\t}\n\n\t\t}\n\t\treturn ret;\n\t},\n\n\t/**\n\t * Da utilizzare sul form - submit\n\t */\n\tformSerialize: function (form, print) {\n\n\t\tvar o = {};\n\t\tvar a = form.serializeArray();\n\t\t// fix x aggiungere anche i check deselezionati\n\t\ta = a.concat(\n\t\t\tform.find('input[type=checkbox]:not(:checked)').map(\n\t\t\t\tfunction () {\n\t\t\t\t\treturn {\"name\": this.name, \"value\": 0}\n\t\t\t\t}).get()\n\t\t);\n\n\t\t$.each(a, function () {\n\n\t\t\tvar value = this.value;\n\n\t\t\tvar procedi = true;\n\n\t\t\tif (form.find('[name=\"' + this.name + '\"]').attr('type') == 'checkbox') {\n\n\t\t\t\tif (this.value == 'on' || parseInt(this.value) == 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = 0;\n\t\t\t\t}\n\n\t\t\t\tif (typeof form.find('[name=\"' + this.name + '\"]').attr('data-returnvalue') != \"undefined\") {\n\t\t\t\t\tif (value == 0)\n\t\t\t\t\t\tprocedi = false;\n\n\t\t\t\t\tvalue = form.find('[name=\"' + this.name + '\"]').attr('data-returnvalue');\n\t\t\t\t}\n\n\t\t\t\tif (print) {\n\t\t\t\t\tvalue = form.find('[name=\"' + this.name + '\"]').is(\":checked\") ? lib.dataPrintTrue : lib.dataPrintFalse;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (procedi) {\n\t\t\t\tif (o[this.name] !== undefined) {\n\t\t\t\t\tif (!o[this.name].push) {\n\t\t\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t\t\t}\n\t\t\t\t\to[this.name].push((value == undefined) ? \"\" : value);\n\t\t\t\t} else {\n\t\t\t\t\to[this.name] = (value == undefined) ? \"\" : value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn o;\n\t},\n\n\tqueryStringSerialize: function (obj) {\n\t\tvar str = [];\n\t\tfor (var p in obj)\n\t\t\tif (obj.hasOwnProperty(p)) {\n\t\t\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n\t\t\t}\n\t\treturn str.join(\"&\");\n\t},\n\n\t/**\n\t * Copia gli attributi di un elemento dentro un altro\n\t */\n\tcopyAttributesToOtherElement: function (elemOrig, elemDest) {\n\t\tvar attributes = elemOrig.prop(\"attributes\");\n\n\t\t// loop through <select> attributes and apply them on <div>\n\t\t$.each(attributes, function () {\n\t\t\telemDest.attr(this.name, this.value);\n\t\t});\n\t},\n\n\ttoday: function () {\n\t\tvar today = new Date();\n\t\tvar dd = today.getDate();\n\t\tvar mm = today.getMonth() + 1; //January is 0!\n\t\tvar yyyy = today.getFullYear();\n\n\t\tif (dd < 10) {\n\t\t\tdd = '0' + dd;\n\t\t}\n\n\t\tif (mm < 10) {\n\t\t\tmm = '0' + mm;\n\t\t}\n\n\t\treturn mm + '/' + dd + '/' + yyyy;\n\t}\n\n};\n\nvar loader = {\n\tdownload: function (show, text) {\n\t\tshow = show || 0;\n\t\tvar modalId = \"#modalLoader\";\n\t\tif (show) {\n\t\t\ttext = text || \"Generazione del documento in corso...\";\n\t\t\ttext = \"<h3 style='text-align:center'><i class='ace-icon fa fa-spinner fa-spin orange bigger-125' ></i> \" + text + \"</h3>\";\n\t\t\t$(modalId + ' h4.modal-title').html('Attendere...');\n\t\t\t$(modalId + ' .modal-body').html(text);\n\t\t\t$(modalId + ' .btn-primary').hide();\n\t\t\t$(modalId + ' .btn-default').text('Chiudi');\n\n\t\t\t$(modalId + ' .btn-default').unbind(\"click\").bind('click', function () {\n\t\t\t\t$(modalId + ' .close').trigger('click');\n\t\t\t});\n\n\t\t\t$(modalId).modal('show');\n\t\t} else {\n\t\t\t$(modalId + ' .close').trigger('click');\n\t\t}\n\t}\n};","/**\n * TODO Implementare l'error handler per le chiamate ajax\n * @type {{xhr: eh.xhr}}\n */\nvar errorHandler = {\n\n    init:function(){\n        $(document).ajaxComplete(function myErrorHandler(event, xhr, ajaxOptions, thrownError) {\n            //console.log(xhr);\n            switch (xhr.status){\n\t\t\t\tcase 200:\n                    break;\n\t\t\t\t// case 404:\n\t\t\t\t// \t$(\"#page-content-section\").html(xhr.responseText);\n\t\t\t\t// \tbreak;\n                case 401:\n                    app.href(\"/login\");\n                    break;\n                default:\n                    console.log(\"ErrorHandler ... error status: \" + xhr.status);\n            }\n        });\n    },\n\n}","var grid = {\n\tinit: function(obj, columns, grid_id){\n\t\tgrid.gridSelector = obj.selector;\n\n\t\t// modello colonne\n\t\tvar colModel = [];\n\n\t\t// numero di righe\n\t\tvar rowNum =  obj.attr('data-pager-rowNum') || 20;\n\n\t\t// oggetto paginatore\n\t\tvar pager = obj.attr('data-pager-selector') || null;\n\n\t\t/**\n\t\t * Attivazione raggruppamenti\n\t\t * @type {*|boolean}\n\t\t */\n\t\tvar url = obj.attr('data-url') || false;\n\t\tvar grouping = obj.attr('data-grouping') || false;\n\t\tvar forceParams = obj.attr(\"data-forceParams\") || \"\";\n\t\tvar subGrid = obj.attr('data-subgrid') || false;\n\t\tvar addRecord = obj.attr('data-add') || false;\n\t\tvar editRecord = obj.attr('data-edit') || false;\n\t\tvar deleteRecord = obj.attr('data-delete') || false;\n\t\tvar refreshRecord = obj.attr('data-refresh') || false;\n\t\tvar viewRecord = obj.attr('data-view') || false;\n\t\tvar searchRecord = obj.attr('data-search') || false;\n\t\tvar multiselect = obj.attr('data-multi-select') || obj.attr('data-multiselect') || obj.attr('data-multiSelect') || false;\n\t\tvar inlineActions = obj.attr('inline-actions') || obj.attr('data-inline-actions') || false;\n\t\tvar autoInlineEdit = obj.attr('data-auto-inline-edit') || false;\n\t\tvar disableInlineDelete = obj.attr('disable-inline-delete') || false;\n\t\tvar disableInlineEdit = obj.attr('disable-inline-edit') || false;\n\t\tvar hideFilters = obj.attr('data-hide-filters') || false;\n\n\t\tif (inlineActions) {\n\t\t\tcolModel.push({\n\t\t\t\tlabel: ' ',\n\t\t\t\tformatter: 'actions',\n\t\t\t\twidth: '50px',\n\t\t\t\tformatoptions: {\n\t\t\t\t\tdelbutton: !disableInlineDelete,\n\t\t\t\t\teditbutton: !disableInlineEdit\n\t\t\t\t},\n\t\t\t\teditable: false,\n\t\t\t\tsearch: false,\n\t\t\t\talign: 'center'\n\t\t\t});\n\t\t}\n\n\t\t// definizione colmodel (json_encode in un array di oggetti)\n\t\t$.each(columns, function(index, obj){\n\t\t\tobj.name = index;\n\n\t\t\t// conversione datepicker\n\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datepicker') != -1){\n\t\t\t\tgrid.elementDatepicker.push(index);\n\t\t\t}\n\n\t\t\t// conversione datetimepicker\n\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datetimepicker') != -1){\n\t\t\t\tgrid.elementDatetimepicker.push(index);\n\t\t\t}\n\n\t\t\t// conversione autocomplete\n\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('autocomplete') != -1){\n\t\t\t\tgrid.elementAutocomplete.push(index);\n\t\t\t}\n\n\t\t\tcolModel.push(obj);\n\t\t});\n\n\t\tvar subGridStatus = subGrid != false;\n\n\t\t// gestione grouping\n\t\tvar groupingStatus = grouping != false;\n\t\tvar groupField = [];\n\t\tvar groupColumnShow = [];\n\t\tvar groupCollapse = false;\n\n\t\tif(groupingStatus){\n\t\t\tgroupCollapse = true;\t// TODO gestire\n\n\t\t\t$.each(grouping.split('|'), function(index, obj){\n\t\t\t\tgroupField.push(obj);\n\t\t\t\tgroupColumnShow.push(false);\n\t\t\t});\n\t\t}\n\n\t\tgrid.resizeArray.push(grid.gridSelector);\n\n\t\tvar curGridSelector = grid.gridSelector;\n\t\tvar curGridLastSelectedRow = grid.lastSelectedRow;\n\n\t\tobj.jqGrid({\n\t\t\turl:\t\t\t\turl + '?data=1&grid_id=' + grid_id + forceParams,\n\t\t\tediturl:\t\t\turl + '/operation/' + grid_id + '?' + forceParams,\n\t\t\tmtype:\t\t\t\t'GET',\n\t\t\tdatatype: \t\t\t'json',\n\t\t\tcolModel:\t\t\tcolModel,\n\t\t\tviewrecords:\t\ttrue,\n\t\t\tadd:\t\t\t\taddRecord,\n\t\t\theight:             'auto',\n\t\t\trowNum:             rowNum,\n\t\t\tpager:              pager,\n\t\t\tautowidth:          true,\n\t\t\tshrinkToFit: \t\ttrue,\n\t\t\tgrouping:           groupingStatus,\n\t\t\tgroupingView: {\n\t\t\t\tgroupCollapse:  groupCollapse,\n\t\t\t\tgroupField:     groupField,\n\t\t\t\tgroupColumnShow:groupColumnShow\n\t\t\t},\n\t\t\tmultiselect:        multiselect,\n\t\t\tsubGrid:            subGridStatus,\n\t\t\tsubGridOptions:\t\t{\n\t\t\t\tplusicon: 'fa fa-plus',\n\t\t\t\tminusicon: 'fa fa-minus'\n\t\t\t},\n\t\t\tonSelectRow: function(id){\n\t\t\t\tvar saveCurrentRow = function(callback, restore) {\n\t\t\t\t\tvar bRestore = restore || false;\n\n\t\t\t\t\t$(curGridSelector).saveRow(curGridLastSelectedRow, function(data){\n\n\t\t\t\t\t\tif (bRestore) {\n\t\t\t\t\t\t\t//$(curGridSelector).restoreRow(curGridLastSelectedRow);\n\t\t\t\t\t\t\t$(curGridSelector).triggerHandler(\"jqGridAfterGridComplete\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcallback();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tif (autoInlineEdit == false)\n\t\t\t\t\treturn;\n\n\t\t\t\tif(id && id !== curGridLastSelectedRow) {\n\t\t\t\t\tif (curGridLastSelectedRow != null) {\n\t\t\t\t\t\tsaveCurrentRow(function(){\n\t\t\t\t\t\t\t// on success\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t$(curGridSelector).editRow(id, true, function(){}, function(){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tcurGridLastSelectedRow = id;\n\t\t\t\t\tgrid.lastSelectedRow = id;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubGridRowExpanded: function(subgrid_id, row_id) {\n\t\t\t\t$('#' + subgrid_id).html(\"<i id='commandSpinner' class='ace-icon fa fa-spinner fa-spin black bigger-125'></i>\");\n\t\t\t\t$('#' + subgrid_id).load(obj.attr(\"data-subgrid\") + \"&row_id=\" + row_id);\n\t\t\t},\n\t\t\tloadComplete: function(data){\n\t\t\t\tif(groupingStatus){\n\t\t\t\t\tgrid.bindClickRowGrouped(grid.gridSelector);\n\t\t\t\t}\n\n\t\t\t\tobj.find(\".ui-inline-edit\").bind(\"click\", function(){\n\n\t\t\t\t\tvar riga = $(this).closest(\"tr\");\n\n\t\t\t\t\t$.each(columns, function(index, obj){\n\n\t\t\t\t\t\t// conversione datepicker\n\t\t\t\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datepicker') != -1){\n\t\t\t\t\t\t\t//riga.find(\"[name='\" + obj.name + \"']\").datepicker({format:'dd/mm/yyyy', autoclose: true}); //, language: \"it\"});\n\t\t\t\t\t\t\triga.find(\"[name='\" + obj.name + \"']\").datetimepicker(grid.datepickerOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(typeof obj.classes != 'undefined' && obj.classes.indexOf('datetimepicker') != -1){\n\t\t\t\t\t\t\triga.find(\"[name='\" + obj.name + \"']\").datetimepicker(grid.datetimepickerOptions);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t// autocompletizer\n\t\t\t\tif(grid.elementAutocomplete.length) {\n\t\t\t\t\t$.each(grid.elementAutocomplete, function (index, nome) {\n\t\t\t\t\t\tvar cbo = obj.parents(\"[role=grid]\").find(\".ui-search-input [name=\" + nome + \"]\");\n\n\t\t\t\t\t\t// conversione in combobox\n\t\t\t\t\t\tcbo.combobox();\n\t\t\t\t\t\tcbo.bind('change', function () {\n\t\t\t\t\t\t\tobj.triggerToolbar();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tobj.find(\".ui-inline-cancel\").bind(\"click\", function() {\n\t\t\t\t\t$(grid.gridSelector).trigger(\"reloadGrid\");\n\t\t\t\t});\n\n\t\t\t\tobj.find(\".ui-inline-save\").bind(\"click\", function() {\n\t\t\t\t\t$(grid.gridSelector).trigger(\"reloadGrid\");\n\t\t\t\t});\n\n\t\t\t\tvar functionName = obj.attr('data-oncomplete');\n\t\t\t\tif (typeof functionName == 'undefined')\n\t\t\t\t\treturn;\n\n\t\t\t\tif (typeof window[functionName] == 'function') {\n\t\t\t\t\twindow[functionName](obj, data);\n\t\t\t\t} else {\n\t\t\t\t\tvar error=false;\n\t\t\t\t\tif(functionName.indexOf('.')!=-1){\n\t\t\t\t\t\tobjArray = functionName.split('.');\n\t\t\t\t\t\tif(typeof window[objArray[0]] == 'object' && typeof window[objArray[0]][objArray[1]] == 'function'){\n\t\t\t\t\t\t\twindow[objArray[0]][objArray[1]](obj, data);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\terror = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\terror = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(error){\n\t\t\t\t\t\tconsole.error('Invalid handler: ' + functioName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$('.ui-search-clear').detach();\n\n\t\tif (!hideFilters)\n\t\t\tobj.jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false, defaultSearch: 'cn' });\n\n\t\tobj.navGrid(pager,\n\t\t\t{\n\t\t\t\tedit: editRecord,\n\t\t\t\tadd: addRecord,\n\t\t\t\tdel: deleteRecord,\n\t\t\t\trefresh: refreshRecord,\n\t\t\t\tview: viewRecord,\n\t\t\t\tsearch: searchRecord,\n\t\t\t\tediticon : 'ace-icon fa fa-pencil blue',\n\t\t\t\taddicon : 'ace-icon fa fa-plus-circle purple',\n\t\t\t\tdelicon : 'ace-icon fa fa-trash-o red',\n\t\t\t\tsearchicon : 'ace-icon fa fa-search orange',\n\t\t\t\trefreshicon : 'ace-icon fa fa-refresh green',\n\t\t\t\tviewicon : 'ace-icon fa fa-search-plus grey'\n\t\t\t},\n\t\t\t{\n\t\t\t\tcloseAfterEdit: true,\n\t\t\t\tafterShowForm: function(form) {\n\t\t\t\t\tgrid.callbackLoadFormEditComplete();\n\t\t\t\t},\n\t\t\t\tafterSubmit: function(response, postData) {\n\t\t\t\t\tif (!response.responseJSON.response) {\n\t\t\t\t\t\treturn [false, response.responseJSON.message];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [true, response.responseJSON.message];\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t'url': url + '/operation/' + grid_id,\n\t\t\t\tcloseAfterAdd: true,\n\t\t\t\tafterShowForm: function(form) {\n\t\t\t\t\tgrid.callbackLoadFormEditComplete();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t'url': url + '/operation/' + grid_id,\n\t\t\t\tbeforeShowForm: function(form) { }\n\t\t\t},\n\t\t\t{\n\t\t\t\tafterShowSearch: function(form) { }\n\t\t\t}\n\t\t);\n\t},\n\tbindClickRowGrouped: function(obj){\n\t\t$(obj).bind('click',(function (e) {\n\t\t\tvar $target = $(e.target),\n\t\t\t\t$groupHeader = $target.closest(\"tr.jqgroup\");\n\t\t\tif ($groupHeader.length > 0) {\n\t\t\t\tif (e.target.nodeName.toLowerCase() !== \"span\" ||\n\t\t\t\t\t(!$target.hasClass(plusIcon) && !$target.hasClass(minusIcon))) {\n\n\t\t\t\t\t$(this).jqGrid(\"groupingToggle\", $groupHeader.attr(\"id\"));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t},\n\tresizeManager: function() {\n\t\t$.each(grid.resizeArray, function(index, item){\n\t\t\tif ($('.page-container').length > 0)\n\t\t\t\t$(item).setGridWidth($('.page-container').width());\n\t\t\telse if ($('.page-content').length > 0) {\n\t\t\t\t$(item).setGridWidth($('.page-content').width());\n\t\t\t}\n\t\t\telse\n\t\t\t\t$(item).setGridWidth($('window').width());\n\t\t});\n\t},\n\tgetSelectedItems: function(gridId){\n\t\treturn $(\"#\" + gridId).getGridParam('selarrrow');\n\t},\n\tcallbackLoadFormEditComplete: function(){\n\n\t\t$.each(grid.elementDatepicker, function(index,nome){\n\t\t\t//$(\"#\" + nome).datepicker({format:'dd/mm/yyyy', autoclose: true}); //, language: \"it\"});\n\t\t\t$(\"#\" + nome).datetimepicker(grid.datepickerOptions);\n\t\t});\n\n\t\t$.each(grid.elementDatetimepicker, function(index,nome){\n\t\t\t$(\"#\" + nome).datetimepicker(grid.datetimepickerOptions);\n\t\t});\n\n\t\t$.each(grid.elementAutocomplete, function (index, nome) {\n\n\t\t\t$(\"#\" + nome).chosen({allow_single_deselect:true});\n\n\t\t\t$(window)\n\t\t\t\t.off('resize.chosen')\n\t\t\t\t.on('resize.chosen', function() {\n\t\t\t\t\t$(\"#\" + nome).each(function() {\n\t\t\t\t\t\tvar $this = $(this);\n\t\t\t\t\t\t$this.next().css({'width': $this.parent().width()});\n\t\t\t\t\t})\n\t\t\t\t}).trigger('resize.chosen');\n\n\t\t\t//resize chosen on sidebar collapse/expand\n\t\t\t$(document).on('settings.ace.chosen', function(e, event_name, event_val) {\n\t\t\t\tif(event_name != 'sidebar_collapsed') return;\n\t\t\t\t$(\"#\" + nome).each(function() {\n\t\t\t\t\tvar $this = $(this);\n\t\t\t\t\t$this.next().css({'width': $this.parent().width()});\n\t\t\t\t})\n\t\t\t});\n\n\t\t});\n\n\t},\n\tgridSelector: \"\",\n\tresizeArray: [],\n\telementDatepicker: [],\n\telementDatetimepicker: [],\n\telementAutocomplete: [],\n\tdatetimepickerOptions: {\n\t\tmask: true,\n\t\tformat: \"d/m/Y H:i:s\",\n\t\tstep: 30,\n\t\tcloseOnTimeSelect: true,\n\t\tscrollInput:false\n\t},\n\tdatepickerOptions: {\n\t\tmask: true,\n\t\tformat: \"d/m/Y\",\n\t\tcloseOnDateSelect: true,\n\t\ttimepicker: false\n\t},\n\tlastSelectedRow: null\n};\n\n$(window).bind('resize', function() { grid.resizeManager(); }).trigger('resize');","var popup = function(gridId) {\n\t\n\tvar popup = this;\n\n\tthis.bindEvents = function() {\n\t\t$('[data-interaction=update]').unbind('click').bind('click', function () {\n\t\t\tapp.block(1);\n\t\t\tapp.formSubmit(\"popup\", $(\"[data-interaction=frmPopup]\"), {}, function (data) {\n\t\t\t\tif (data.response) {\n\t\t\t\t\tapp.href('#popup/' + data.message);\n\t\t\t\t} else {\n\t\t\t\t\tapp.error(data.message);\n\t\t\t\t}\n\t\t\t\tapp.block(0);\n\t\t\t}, function(){\n\t\t\t\tapp.block(0);\n\t\t\t});\n\t\t});\n\n\t\t$('[data-interaction=\"delete\"]').unbind('click').bind('click', function () {\n\t\t\tvar id = $(this).attr(\"data-id\");\n\t\t\t$.delete(\"popup/\"+id, function(data){\n\t\t\t\tif (data.response) {\n\t\t\t\t\tapp.href(\"#popup\");\n\t\t\t\t} else {\n\t\t\t\t\tapp.error(data.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('[data-interaction=edit]').unbind('click').bind('click', function() {\n\t\t\tvar url = $(this).attr('data-url');\n\t\t\tvar id = $(\"#\" + gridId).jqGrid('getGridParam', 'selrow') || 0;\n\n\t\t\tif(!id) {\n\t\t\t\tapp.warning(\"Devi selezionare una riga\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tapp.href(url + \"/\" + id);\n\t\t});\n\t};\n\t\n\tthis.bindEvents();\n\t\n};","var weconsPopupper = {\n    /**\n     * Aggiunge N scripts alla pagina\n     *  es: getMultiScripts(aScripts).done(function(){...});\n     * @param arr\n     * @param path\n     * @returns {*}\n     */\n    getMultiScripts: function (arr, path) {\n        var _arr = jQuery.map(arr, function (scr) {\n            return jQuery.getScript((path || \"\") + scr);\n        });\n\n        _arr.push(jQuery.Deferred(function (deferred) {\n            jQuery(deferred.resolve);\n        }));\n\n        return jQuery.when.apply(jQuery, _arr);\n    },\n\n    popupWeconsClick: function(obj) {\n        // chiusura popup\n        jQuery.unblockUI();\n\n        // invio richiesta google analytics per click\n        if (typeof ga != 'undefined')\n            ga('send', 'event', 'bannerPopupClick', jQuery(obj).attr('title'), jQuery(obj).attr('href'));\n        else\n            console.log(['bannerPopupClick', jQuery(obj).attr('title'), jQuery(obj).attr('href')]);\n\n    },\n\n    runPopupWecons: function(testForceOpen) {\n\n        testForceOpen = testForceOpen || 0;\n\n        // verifico di non aver già recuperato il popup nella sessione corrente\n        if (!Cookies.get('popupWeconsAlreadyOpened')) {\n            jQuery.get(weconsPopupper.sourceUrl + 'popup/last')\n                .success(function (data) {\n\n                    if (data) {\n\n                        console.log(testForceOpen);\n\n                        if ((data.id && data.id > 0) || testForceOpen) {\n\n                            Cookies.set('popupWeconsAlreadyOpened', '1');\n\n                            var target = data.blank ? '_blank' : '';\n                            var $div = jQuery('<div><a title=\"' + data.title + '\" onclick=\"weconsPopupper.popupWeconsClick(this);\" id=\"popupWecons\" href=\"' + data.url + '\" target=\"' + target + '\"><img src=\"' + weconsPopupper.sourceUrl + data.image + '\" alt=\"' + data.title + '\" style=\"width: 100%;\"></a><button onclick=\"jQuery.unblockUI();\">chiudi</button></div>');\n                            jQuery.blockUI({message: $div.html()});\n                            $(\"#popupWecons\").parent().css('background-color', 'transparent');\n                            $(\"#popupWecons\").parent().css('border', 'none');\n                            $(\"#popupWecons\").parent().css('left', '25%');\n                            $(\"#popupWecons\").parent().css('width', '50%');\n                            $(\"#popupWecons\").parent().css('top', '20%');\n\n                            // invio richiesta google analytics per caricamento popup\n                            if (typeof ga != 'undefined')\n                                ga('send', 'event', 'bannerPopupView', data.title, data.url);\n                            else\n                                console.log(['bannerPopupView', data.title, data.url]);\n\n                        } else {\n                            console.log(\"Nessun popup attivo\");\n                        }\n                    }\n                })\n                .error(function () {\n                    console.error(\"Popup error\");\n                });\n        }else{\n            console.log(\"Popup already showed in session\");\n        }\n\n    },\n\n    run: function(sourceUrl){\n\n        weconsPopupper.sourceUrl = sourceUrl;\n\n        var aScripts = [];\n        if (typeof jQuery.blockUI == 'undefined') {\n            aScripts.push(\"http://weconstudio.it/wecookielaw/jquery.blockUI.js\");\n        }\n        if (typeof Cookies == 'undefined') {\n            aScripts.push(\"http://weconstudio.it/wecookielaw/js.cookie.js\");\n        }\n        if (aScripts.length > 0) {\n            weconsPopupper.getMultiScripts(aScripts).done(function () {\n                weconsPopupper.runPopupWecons()\n            });\n        } else {\n            weconsPopupper.runPopupWecons();\n        }\n    },\n\n\n    // url base da impostare tramite sito 'client'\n    sourceUrl: \"\" // NB deve terminare con '/'\n};\n\n"],"sourceRoot":"/source/"}